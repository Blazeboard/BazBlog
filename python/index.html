<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Baz&#x27;s blog</title>

      
        <link rel="alternate" type="application/atom+xml" title="RSS" href="https://baz.ee/atom.xml">
      

      
          <link rel="stylesheet" href="https://baz.ee/site.css">
      

      
      
    </head>

    <body class="hack dark main container">
        
    
        
                
                    <header>
                        <nav itemscope itemtype="http://schema.org/SiteNavigationElement">
                        
                            <a itemprop="url"
                               class=""
                               href="https:&#x2F;&#x2F;baz.ee">
                                <span itemprop="name">Home
                                </span></a>
                        
                            <a itemprop="url"
                               class=""
                               href="https:&#x2F;&#x2F;baz.ee&#x2F;categories">
                                <span itemprop="name">Categories
                                </span></a>
                        
                            <a itemprop="url"
                               class=""
                               href="https:&#x2F;&#x2F;baz.ee&#x2F;tags">
                                <span itemprop="name">Tags
                                </span></a>
                        
                        </nav>
                    </header>
                
            
    

<article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
        <h1 itemprop="headline">Python</h1>
        <span class="muted">
    <svg style="margin-bottom:-3px" class="i-clock" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <circle cx="16" cy="16" r="14"/>
        <path d="M16 8 L16 16 20 20"/>
    </svg>
    <span>108 minute read</span>
    <svg style="margin-bottom: -3px" class="i-edit" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z"/>
    </svg>

    Published: 2020-08-27
</span>
    </header>
    <div itemprop="articleBody">
      <p>Python简介</p>
<p>1989年圣诞节开始写Python的编译器</p>
<p>1991 2第一个Python编译器诞生</p>
<p>1994 1Python1.0正式发布</p>
<span id="continue-reading"></span>
<p>2000.10.16 Python2.0发布</p>
<p>2008.23.3 Python3.0发布</p>
<p>版本命名</p>
<p>例如3.8.5</p>
<p>3代表大版本号，一般当整体重写或出现不向后兼容的改变时增加</p>
<p>8表示功能更新，出现新功能时增加</p>
<p>5表示小的改动（比如修复bug），只要有修改就增加</p>
<p>Python的优缺点</p>
<p>优点</p>
<ol>
<li>简单和明确，做一件事只有一种方法</li>
<li>学习曲线低，容易上手</li>
<li>开源，有强大的生态圈</li>
<li>解释型编程语言，可跨平台支持</li>
<li>对面向对象编程和函数式编程都提供支持</li>
<li>可扩展性和可嵌入性</li>
<li>代码规范程度高，可读性强</li>
<li>使用者广泛</li>
</ol>
<p>缺点：</p>
<ol>
<li>执行效率低</li>
<li>代码无法加密</li>
<li>开发的时候可选择的框架太多</li>
</ol>
<p>应用领域和职位</p>
<p>Python环境搭建</p>
<p>理解程序运行</p>
<p><img src="images/Python/image-20200817093721456.png" alt="image-20200817093721456" /></p>
<p>低级语言：
机器型语言：二进制的0和1，CPU内部工作指令，只有硬件才能读懂，灵活、直接执行和速度快</p>
<p>汇编语言：是一种用于电子计算机、微处理器、微控制器或其他可以编程器件的语言，也称为符号语言，用一些容易理解和记忆的字母或单词来代替一个特定的指令，比如用“ADD”来代表数字逻辑上的加减</p>
<p>高级语言：</p>
<p>编译语言：C/C++</p>
<p>解释型语言：Python   Ruby   Perl</p>
<p><img src="images/Python/image-20200817093845728.png" alt="image-20200817093845728" /></p>
<p>机器语言是二进制执行的，无需翻译过程，CPU可以直接读取。其他语言最终都需统一编译为机器语言执行</p>
<p>汇编语言需要经过一次编译处理，硬件相关无法移植，抽象程度低可读性差，执行效率很高，开发效率很低</p>
<p>编译语言需要一次编译过程，硬件无关可移植，抽象程度高可读性强，执行效率较高，开发效率较高</p>
<p>解释型语言需要经过两次翻译，硬件无关可移植，抽象程度超高，可读性最强，执行效率较低，开发效率最高</p>
<p>Python对象和语言元素</p>
<p>Python的对象</p>
<p>编程的本质便是围绕着“do things”，编程就是”一动一静“</p>
<p>动：解决、处理、执行</p>
<p>静：事情、问题、东西</p>
<p>如何编程？</p>
<ul>
<li>围绕do来做编程，称为面向过程的编程（POP）</li>
<li>围绕thing来做编程，称为面向对象编程（OOP)</li>
</ul>
<p><img src="images/Python/image-20200817093911944.png" alt="image-20200817093911944" /></p>
<p>例如：我要好好学python</p>
<p>从面向过程来看：</p>
<ol>
<li>收集学习教程：教程   文档    视频</li>
<li>学习语法</li>
<li>项目练手</li>
<li>完成学习</li>
</ol>
<p>从学习流程入手</p>
<p>从面向对象来看：</p>
<p>对象1：我（人）</p>
<p>对象2：python（物）</p>
<p>对象3：学习（教程   视频   文档）</p>
<p>从学习这件事的对象分解开始</p>
<p>什么是对象？</p>
<p>在python中一切皆对象！</p>
<p>python中，能够被处理、被解决的“东西”，都称之为对象（object）</p>
<p>对象有各自的特性和行为</p>
<p>对象的组成</p>
<p><img src="images/Python/image-20200817093931081.png" alt="image-20200817093931081" /></p>
<p>对象的特征：</p>
<p>对象的数据、对象的状态，这是一个静态的信息</p>
<p>值 value ：对象表示的数据项</p>
<p>身份ID：唯一的身份标识，是该对象的内存地址，可以用内建id()来查看</p>
<p>类型type：对象的类型决定了该对象可以保存什么类型的值，可以进行什么类型的操作，以及遵循什么规则，可以通过内建函数type()获得</p>
<p>对象的行为：</p>
<p>对象的操作、功能、方法等，是一种动态信息</p>
<p>方法：通过内建函数dir()来获得</p>
<p>例子：人/程序员/小明</p>
<p>​		   特征：名字   小明   身高 170   体重60kg   年龄18</p>
<p>​		   行为：吃饭   睡觉   学习</p>
<p>对象的类型：</p>
<p>基础对象类型：数字、字符串、列表、元组、字典、集合</p>
<p>进阶对象类型：文件、函数、模块、类</p>
<p>自定义对象类型：类</p>
<p>变量：</p>
<p>在程序设计中，变量是存储数据的载体。</p>
<p>常用的数据类型：</p>
<ul>
<li>整型    在python中只有一个int型，支持二进制、八进制、十六进制等表示法</li>
<li>浮点型    除了数学写法（1.23）还支持科学计数法（1.23e2）</li>
<li>字符串型    通过单引号或者双引号括起来的任意文本”hello”</li>
<li>布尔型    Ture    False    也可以通过布尔计算得出布尔值</li>
<li>复数型    与数学上的复数表示一样 3+5j</li>
</ul>
<p>变量的定义：</p>
<p>变量是一种对象的引用，好比一个链接，指向任意的数据/对象类型</p>
<p>变量→对象（数字、列表、字符串、元组、字典、集合等）</p>
<p>a=1</p>
<p>变量赋值的原理</p>
<p>第一步：创建内存空间，生成对象（1）</p>
<p>第二步：创建变量，名称为a</p>
<p>第三步：将变量a指向对象1</p>
<p>变量的特征</p>
<ol>
<li>变量在第一次赋值时被创建（内存中）</li>
<li>再次使用该变量时，内存中无需再创建该变量，直接调用。</li>
<li>变量和对象一样，开始的时候不需要进行类型说明</li>
<li>变量在表达式中使用之前必须先赋值</li>
<li>变量在表达式中使用将替换为它们所指向的值</li>
<li>变量如果没有指向一个对象，就会被垃圾回收</li>
</ol>
<p>变量赋值：</p>
<p>赋值语句：var=value</p>
<p>变量命名规则</p>
<p>硬性规则</p>
<p>变量名由字母、数字和下划线构成，数字不能开头。</p>
<p>变量名长度不受限制，不能使用空格、连字符、标点符号、引号或者其他字符</p>
<p>变量对大小写敏感</p>
<p>不能跟关键字、系统保留字冲突</p>
<p>[-5,256]这个范围内的整数（int），python是用一个smallint数组来维护的，这个范围内的int已经在内存空间创建了内存空间地址。超出这个范围，则会在每次声明的时候分别创建内存空间地址。float和tuple同理</p>
<p>在对变量类型进行转换的时候可以使用python的内建函数</p>
<p>itn()将一个数值或者字符转换成整数</p>
<p>float()将一个字符串转换成浮点数</p>
<p>str()将对象转换成该编码对应的字符串</p>
<p>chr()编码转换成字符</p>
<p>ord()将字符转换成编码</p>
<p>运算符</p>
<p>等于==   不等于!=</p>
<p>身份运算符 is is not</p>
<p>成员运算符 in not in</p>
<p>逻辑运算符 and or not</p>
<p>赋值运算符 = += -= *=</p>
<p>指数 **</p>
<p>下标[]  切片[0:2]</p>
<p>运算符优先级</p>
<p>**优先级最高</p>
<p>乘、除、取模、取整、整除次之</p>
<p>加减再次</p>
<p>/&gt;&gt;右移   &lt;&lt;左移</p>
<p>^|位运算符</p>
<p>比较运算符&lt;= &lt; &gt; &gt;=</p>
<p>赋值运算符</p>
<p>身份运算符</p>
<p>成员运算符</p>
<p>逻辑运算符</p>
<p># 通过年份判断是不是闰年（如果是闰年输出True）</p>
<p># 4的倍数且不是100的倍数 或者 400的倍数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>year=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">请输入年份</span><span>&#39;))</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span>runnian=(year%</span><span style="color:#d08770;">4</span><span>==</span><span style="color:#d08770;">0 </span><span>and year%</span><span style="color:#d08770;">100 </span><span>!=</span><span style="color:#d08770;">0 </span><span>or year%</span><span style="color:#d08770;">400</span><span>==</span><span style="color:#d08770;">0</span><span>)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(runnian)</span><span>
</span></code></pre>
<p>Python对象类型之数字</p>
<p>整数：就是我们平常使用最多的数字 1 0 -1</p>
<p>通过进制来区分，分为十进制、八进制（python3:0o）、十六进制（0x）</p>
<p>整数的范围是无穷大，在Python中取决于内存的大小（2**100）</p>
<p>浮点数：就我我们平常使用的小时 10.12</p>
<p>浮点数的范围占8个字节（64比特）正负10的308.25次方</p>
<p>不建议用浮点数做精确计算，会出现误差（计算机在存储数据的时候需要转换成二进制，很多小数转换成二进制是无穷大的，而计算机的存储是有限的，所以需要截取处理）</p>
<p>浮点数计算的时候结果会溢出，整数不会</p>
<p>复数</p>
<p>复数由实部和虚部组成 1+2j</p>
<p>1.1+2.2j</p>
<p>布尔型：</p>
<p>Ture 和 False（首字母必须大写）用于逻辑判断，多用于判断语句中</p>
<p>其他：</p>
<p>分数</p>
<p>空值 None</p>
<p>常量 不变化的量</p>
<p>数字操作运算符</p>
<p>+ - * / // % ** </p>
<p>== &gt;= &lt;= &lt; &gt; (布尔值)</p>
<p>and or not </p>
<p>数字操作内建函数</p>
<ol>
<li>
<p>数值计算函数：</p>
<p>abs()取绝对值；</p>
<p>pow()用于进行指数运算；</p>
<p>round()四舍五入（返回值是整数）round(3.45,1) 1表示保留小数点后一位；</p>
<p>math.floor()向下取整 必须先导入math模块，才能使用math.floor函数；</p>
<p>int()直接截取小数部分（返回的是整数）；</p>
<p>divmod()把除法和取余结合，返回一个包含商和余数的元组divmod(10,3)</p>
</li>
<li>
<p>类型转化函数</p>
<p>int()</p>
<p>complex()将其他数字类型转换为复数 complex(1)</p>
<p>float()将其他数字类型转换为浮点数float(1)</p>
<p>bool()转换为布尔值</p>
<p>布尔类型转换时’’,””0，（）空元组，[]空数组，{}空字典 、0L(长整数)、 0.0+0.0j、 Fasle等转换为布尔值都是False，其他都为True</p>
</li>
<li>
<p>进制转换函数</p>
<p>hex() 返回十六进制</p>
<p>oct() 返回八进制</p>
<p>bin() 返回二进制</p>
</li>
<li>
<p>ASCII转换函数</p>
<p>ord() 接收一个字符，转换成对应的数字</p>
<p>chr() 接收一个数字，转换成对应的字符</p>
</li>
</ol>
<p>数字操作之内置模块</p>
<ol>
<li>
<p>math 高级数学计算模块，包含了很多预先编写好的函数代码</p>
<p>cos()</p>
<p>sin()</p>
<p>Pi()</p>
<p>sqrt()</p>
<p>要使用内置模块，得先将它导入python内存中，通过import命令</p>
<p>导入之后通过.来进行调用</p>
</li>
<li>
<p>random 随机数学模块。</p>
<p>randrange() 随机返回（最小值，最大值）之间的一个整数，不包括最大值的</p>
<p>uniform() 返回两者之间一个浮点数</p>
<p>choice() 随机返回给点列表的一个元素 random.choice([1,2,3])</p>
</li>
<li>
<p>NumPy</p>
<p>提供了许多高级数值编程工具，专门为进行严格数字处理而产生的</p>
</li>
</ol>
<p>Python对象类型之字符串</p>
<p>一组有序的字符组合，由字母、数字、符号等信息组成</p>
<p>用于存储和表现基于文本的信息</p>
<p>变量=字符串</p>
<p>s=’hello,world!’</p>
<p>字符串可以通过单引号、双引号、三引号进行包裹</p>
<p>字符串特征：</p>
<p>有序 字符串中的元素按照顺序（从左到右）存储</p>
<p>不可变 </p>
<p>python对象类型根据对象内容本身是否可修改，分为可变对象和不可变对象</p>
<p>可变对象：列表、字典</p>
<p>不可变对象：数字、字符串、元组</p>
<p>字符串操作之操作符</p>
<ol>
<li>
<p>索引操作符 []</p>
<p>正向索引字符串的下标从0开始，逆向索引从-1开始</p>
</li>
<li>
<p>切片操作符 [:]</p>
<p>逆向切片索引从小到大来写 a[-3,-1]</p>
</li>
<li>
<p>连接操作符 +</p>
</li>
<li>
<p>重复操作符*</p>
</li>
<li>
<p>成员操作符 in not in</p>
</li>
</ol>
<p>字符串操作之内置函数</p>
<ol>
<li>判断函数</li>
</ol>
<p>s.isalnum() 判断字符串s是否只包含字母和数字，如果是返回True</p>
<p>s.isalpha() 判断字符串s是否只包含字母，如果是返回True</p>
<p>s.isdigit() 判断字符串s是否只包含数字，如果是返回True</p>
<p>s.islower() 判断字符串s是否只包含小写字母，如果是返回True</p>
<p>s.isupper() </p>
<p>s.isspace() 判断字符串s是否只包含空白(空格)字符，如果是返回True</p>
<p>s.startswith(t) 判断字符串s是否以字符t开头</p>
<p>s.endswith(t)</p>
<ol start="2">
<li>搜索函数</li>
</ol>
<p>s.count(t) 搜索字符t并返回出现的次数</p>
<p>s.find(t) 搜索字符t,如果没有找到，返回-1，否则返回t在s中的起始位置下标</p>
<p>s.index(t) 与find相同，返回t在s中的起始位置下标，如果找不到，会触发ValueError异常</p>
<p>s.rfind()</p>
<p>s.rindex()</p>
<ol start="3">
<li>格式函数</li>
</ol>
<p>s.center(n,t) 包含n个字符的字符串，其中s位于中间，两边通过字符t填充，t可选</p>
<p>s.ljust(n,t) s位于左边，剩下通过t填充至n</p>
<p>s.rjust(n,t)</p>
<p>s.format(vars) 格式化字符串，类似%</p>
<p>'{0},{1}'.format('hello','world')</p>
<p>'{A},{B}'.format(B='hello',A='world')</p>
<ol start="4">
<li>剥离函数</li>
</ol>
<p>s.strip(t) 删除s开头和末尾的t字符，如果t为空默认删除空格，字符串中间的t字符不受影响</p>
<p>s.lstrip(t) 删除s开头的t字符</p>
<p>s.rstrip(t) 删除s末尾的t字符</p>
<ol start="5">
<li>拆分函数</li>
</ol>
<p>s.partition(t) 将s拆分为三个字符串（head、t、tail）</p>
<p>s.rpartition(t)</p>
<p>s.split(t)以t为分隔符，将s划分为一系列的子串，并将子串放入一个列表返回</p>
<p>s.rsplit(t)</p>
<p>s.splitlines()返回一个由s中的各行组成的列表</p>
<ol start="6">
<li>替换函数</li>
</ol>
<p>s.replace(old,new)将s中的每个old替换为new</p>
<p>s.expandtabs(n)将s中的每个制表符tab替换为n个空格</p>
<ol start="7">
<li>大小写函数‘</li>
</ol>
<p>s.lower()</p>
<p>s.upper()</p>
<p>s.captilize()将s的第一个字符改为大写</p>
<p>s.swapcase()将s中的小写字母转化为大写，大写转化为大写</p>
<p>s.title()将s中的每一个单词的首字母大写，其他字母都是小写</p>
<p>字符串操作之字符编码</p>
<p>字符编码</p>
<p>计算机只能读懂二进制的0和1，处理字符时，需要将字符转化为数字存储并处理</p>
<p>将字符与数字相互对应的编码规则就称为字符编码</p>
<p>’A‘    65    01000001</p>
<p>编码分类</p>
<ol>
<li>ASCII 属于最早的编码规则，美国标准信息交换代码，范围是0-127，总共128个字符。采用一个字节八个比特来表示字符，总共支持最多255个字符</li>
</ol>
<p>语言支持：只能支持英文</p>
<ol start="2">
<li>Unicode  统一码或者万国码</li>
</ol>
<p>采用2个字节或者4个字节来表示字符，一般采用两个</p>
<p>编码方式UCS</p>
<p>UCS-2   UCS-4</p>
<p>语言支持：所有国家</p>
<ol start="3">
<li>UTF-8</li>
</ol>
<p>在Unicode中有些字符并不需要两个字节进行存储和传输，例如英文只需要一个字节就可以。Unicode可以看做是一个字符编码的规范，UTF-8是Unicode的存储和传输的实现方式。UTF-8就是在互联网上使用最广泛的一种Unicode的实现方式。</p>
<p>实现方式：</p>
<p>UTF-8 采用八个比特一个字节来作为基础单元</p>
<p>UTF-16</p>
<p>UTF-32</p>
<p>可变长编码，采用1到6个字节来存储和传输字符，一般英文用一个字节，汉语用三个字节，比较复杂 的用四到六的字节，可以有效节省空间</p>
<p>语言支持：所有国家</p>
<p>编码设置，在python中为UTF-8</p>
<p>查看当前编码的方法</p>
<p>import sys</p>
<p>print(sys.getdefaultencoding())</p>
<p>修改编码方式：</p>
<p>可在脚本开头添加：</p>
<p>字符串操作之转义字符</p>
<p>通过转义字符可以在字符串中实现特殊需求，比如回车、换行等功能</p>
<p>如果要使用转义字符，python中用\转义</p>
<p>常见的转义字符</p>
<p>续行符</p>
<p>反斜杠符\</p>
<p>单引号\'</p>
<p>双引号\&quot;</p>
<p>换行\n</p>
<p>横向制表符\t</p>
<p>纵向制表符\v</p>
<p>回车\r</p>
<p>退格\b</p>
<p>响铃\a</p>
<p>换页\f</p>
<p>八进制数\ott     tt代表字符</p>
<p>十六进制数\xtt</p>
<p>有的情况下需要关闭转义。比如字符串中出现路径的时候</p>
<p>file=open(r ‘C:\new\test.txt’,’w’)     加r</p>
<p>字符串操作之格式化字符串</p>
<p>通过引入字符串，可以实现更加复杂的字符串表达</p>
<p>格式化容许在一条字符串语句执行多字符替换</p>
<p>格式化字符串采用%来引用</p>
<p>格式化语法</p>
<p>‘字符串%d %s’ %(元素1，元素2)</p>
<p>格式化字符串</p>
<p>格式化整数</p>
<p>其他格式化字符</p>
<p>%f格式化浮点数，可以指定精度%.1f</p>
<p>%c格式化字符及其ASCII码</p>
<p>python对象之列表</p>
<p>是一组有序的集合对象类型，可以包括数字，字符串甚至列表等信息</p>
<p>用于存储其他对象信息，支持复杂的数据存储和处理</p>
<p>变量=[元素1，元素2，元素3……]</p>
<p>L=[‘hello’,123,[1,2,3]]</p>
<p>列表的特征：有序  可变</p>
<p>列表操作之操作符</p>
<ol>
<li>索引操作符[]</li>
<li>切片操作符[:]</li>
<li>连接操作符+</li>
<li>重复操作符*</li>
<li>成员操作符 in not in</li>
</ol>
<p>列表操作之内置函数</p>
<p>len()获取列表的元素个数（长度）</p>
<p>max()获取列表中最大的值</p>
<p>min()</p>
<p>sum() 将列表元素相加返回和</p>
<p>列表操作之列表内置函数</p>
<p>l.append() 添加元素到列表末端</p>
<p>l.insert() 添加元素到具体索引位置 l.insert(1,10)  1代表下标</p>
<p>l.extend() 在本列表末尾添加其他列表的元素，等于连接操作符</p>
<p>列表删除</p>
<p>l.pop() 默认删除列表末尾的元素并返回删除掉的元素，也可以指定索引删除</p>
<p>l.remove() 删除某个指定的元素（如果出现重复，匹配第一个选项）</p>
<p>列表搜索</p>
<p>l.count() 统计某个元素在列表中出现的次数</p>
<p>l.index()找出列表某一个元素第一次出现的索引位置</p>
<p>列表排序</p>
<p>l.reverse() 翻转列表位置</p>
<p>l.sort() 对列表进行由小到大的排序</p>
<p>列表操作之列表解析</p>
<p>列表解析就是通过特定的表达式简洁方便生成新的列表，包括列表迭代和列表生成式</p>
<p>语法：[X for Y in Z][X for Y in Z if]</p>
<p>X是需要得到的结果，Y是遍历的参数，Z是遍历对象</p>
<p>Python对象类型之元组</p>
<p>元组（tuple）是一组有序不可变的集合对象类型，可以包括数字，字符串甚至是列表、元组等信息。与列表相比，元组的内容不可变，并且采用小括号来创建，其他特性基本相同</p>
<p>那什么时候用列表什么时候用元组？</p>
<p>若对象内容操作时要求是只读的，建议用元组，更加安全</p>
<p>若经常需要修改对象内容时，建议用列表，否则每次对元组进行修改时，就必须创建新的元素</p>
<p>通过list()    tuple()可以进行互相转换</p>
<p>元组语法：变量=(元素1，元素2，元素3……)</p>
<p>T=(‘hello’,123,(10.20))</p>
<p>如果要创建一个单元组，元素后面必须加逗号</p>
<p>单元素列表不存在这个问题</p>
<p>元组的特征：有序   不可变</p>
<p>元组操作之操作符</p>
<ol>
<li>索引操作符[]</li>
<li>切片操作符[:]</li>
<li>连接操作符+</li>
<li>重复操作符*</li>
<li>成员操作符</li>
</ol>
<p>元组操作之内置函数</p>
<p>t.count()统计某一个元素在元组中出现的次数</p>
<p>t.index()找出元组中某一个元素第一次出现的索引位置</p>
<p>Python对象类型之字典</p>
<p>字典是一种无序集合对象类型，可以存储任意的数据类型</p>
<p>字典也是Python中唯一的映射类型，通过“key-value”键值对方式来存储数据</p>
<p>与列表相比，字典是无序的，列表是有序的；列表采用的是偏移位置来存取，字典采用的是键/散列映射来存取，速度快效率高。列表虽然速度慢，但是内存消耗小。</p>
<p>字典的语法：变量={键1:值1,键2:值2,…}</p>
<p>d={‘A’:1,‘B’:2,’C’:3}</p>
<p>字典原理</p>
<p>字典哈希原理</p>
<p>哈希的作用：一般是用来做完整性校验，通过哈希算法（md5  sha 等）将不同大小的输入，输出一个固定值（128bit或者160bit）</p>
<p>特点：不可逆，雪崩效应，唯一性</p>
<p><img src="images/Python/image-20200817172436761.png" alt="image-20200817172436761" /></p>
<p>字典特征：</p>
<p>无序：字典没有按照索引位置存储，而是按照散列映射关系存储</p>
<p>可变：键是不可变的，并且必须是唯一的，而值是可变的，相同的值可以出现在同一个字典里</p>
<p>键只能由数字、字符串、元组等不可变的对象组成，不能用列表</p>
<p>一个键只能对应一个值，如果有多个值，后面的值会覆盖前面的值</p>
<p>字典操作之操作符</p>
<ol>
<li>
<p>查找操作符 </p>
<p>d[k]   通过键k查找字典中元素的值</p>
<p>d[k]=v  通过键k，给字典某元素赋值为v，如果没有键k，则创建。</p>
</li>
<li>
<p>成员操作符 in not in</p>
</li>
</ol>
<p>字典操作之内置函数</p>
<p>d.items() 返回一个由字典d的键-值组成的视图</p>
<p>d.keys()返回一个由字典d的键组成的视图</p>
<p>d.values()返回一个由字典d的值组成的视图</p>
<p>d.get(key)返回与key相关联的值</p>
<p>d.pop(key)删除键key并返回相关联的值</p>
<p>d.popitems()删除某个键值对，返回删除掉的键值对</p>
<p>d.clear()清空字典</p>
<p>d.copy()复制字典</p>
<p>d.update(e) 将e中的键值对添加到d中</p>
<p>d.setdefault(key,value)如果键key包含在字典d中，则返回其值，否则，返回value并将(key,v)添加到字典d中。</p>
<p>Python对象类型之集合</p>
<p>集合（set）是一种无序不重复对象类型。类似字典，但是只有键没有值</p>
<p>消除重复元素，可以实现交并补差等数学运算</p>
<p>集合语法：set(列表/字符串)</p>
<p>list=[1,2,3,1,2,4]</p>
<p>s=set(list)</p>
<p>集合特征</p>
<p>无序：类似字典，没有索引，不支持切片和索引访问</p>
<p>不重复：每个元素在集合中都是唯一的</p>
<p>可变：set()可以增加删除元素</p>
<p>不可变：frozenset()不可以增删元素</p>
<p>集合操作之操作符</p>
<ol>
<li>交集 &amp;</li>
<li>并集 |</li>
<li>差集 -(获取集合中不同元素，不同元素在s1中) ^(获取集合中不同元素，元素在不同集合中，并集减去交集)</li>
</ol>
<p>集合操作之内置函数</p>
<p>s.intersection() 交集</p>
<p>s.union() 并集</p>
<p>s.difference() 等于差集-</p>
<p>s.symmetric_difference 等于差集^</p>
<p>s.add() 增加元素</p>
<p>s.update() 增加集合中的元素（集合叠加）</p>
<p>s.remove()删除特定元素，如果没有该元素则报错</p>
<p>s.discard() 删除特定元素，如果没有该元素不报错</p>
<p>s.pop() 删除一个元素</p>
<p>s.clear() 清空集合</p>
<p>s.issubset() 判断是不是子集</p>
<p>s.issuperset() 判断是不是包含集合</p>
<p>Python的流程控制</p>
<p>条件语句</p>
<p>if 条件判断1:</p>
<p>​	代码块1</p>
<p>elif 条件判断2:</p>
<p>​	代码块2</p>
<p>elif 条件判断3:</p>
<p>​	代码块3</p>
<p>条件表达式</p>
<p>也称为三元操作符，是if语句的缩写格式</p>
<p>A=Y if X else Z  如果X为真，A=Y，否则A=Z</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">if </span><span>x:</span><span>
</span><span>
</span><span>	A=Y</span><span>
</span><span>
</span><span style="color:#b48ead;">else</span><span>:</span><span>
</span><span>
</span><span>	A=Z</span><span>
</span></code></pre>
<p>循环语句</p>
<p>while循环</p>
<p>语法：</p>
<p>while 条件判断：</p>
<p>循环代码块</p>
<p>for循环</p>
<p>循环控制</p>
<p>while循环例子</p>
<p>输出1到10</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>n=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span style="color:#b48ead;">while </span><span>n&lt;</span><span style="color:#d08770;">10</span><span>:</span><span>
</span><span>
</span><span>  n=n+</span><span style="color:#d08770;">1</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span></code></pre>
<p>输出1到10数字相加的结果</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>n=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span style="color:#96b5b4;">sum</span><span>=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span style="color:#b48ead;">while </span><span>n&lt;</span><span style="color:#d08770;">10</span><span>:</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">sum</span><span>=</span><span style="color:#96b5b4;">sum</span><span>+n</span><span>
</span><span>
</span><span>  n=n+</span><span style="color:#d08770;">1</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#96b5b4;">sum</span><span>)</span><span>
</span></code></pre>
<p>while也可以和else结合</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">while </span><span>n&lt;</span><span style="color:#d08770;">10</span><span>:</span><span>
</span><span>
</span><span>  n=n+</span><span style="color:#d08770;">1</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span><span>
</span><span style="color:#b48ead;">else</span><span>:</span><span>
</span><span>
</span><span>  n=-n</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span></code></pre>
<p>for循环</p>
<p>语法 for X in Y</p>
<p>X是变量，Y是可迭代对象（可以是字符串、列表、元组、字典、函数等）</p>
<p>遍历字符串</p>
<p>for循环结合else语句</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>l=[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>,</span><span style="color:#d08770;">4</span><span>,</span><span style="color:#d08770;">5</span><span>]</span><span>
</span><span>
</span><span style="color:#b48ead;">for </span><span>x </span><span style="color:#b48ead;">in </span><span>l:</span><span>
</span><span>
</span><span>  l=x*x</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(l)</span><span>
</span><span>
</span><span style="color:#b48ead;">else</span><span>:</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(x)</span><span>
</span></code></pre>
<p>当循环执行完之后则执行else语句</p>
<p>for循环结合range()</p>
<p>range()函数可以生成整数列表</p>
<p>range(x,y)会生成x到y-1的整数列表</p>
<p>range(start,end,step) step代表每次递增多少，默认是1</p>
<p>range的返回值不等于end，可以等于start</p>
<p>for x in range(1,10,2):</p>
<p>print (x)</p>
<p>循环控制</p>
<p>break：用于for循环或者while循环中，用来终止整个循环语句</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>n=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span style="color:#b48ead;">while </span><span>n&lt;</span><span style="color:#d08770;">10</span><span>:</span><span>
</span><span>
</span><span>  n=n+</span><span style="color:#d08770;">1</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">if </span><span>n==</span><span style="color:#d08770;">8</span><span>:</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">break</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span></code></pre>
<p>continue：用于for循环或者while循环中，用来终止本次循环</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>n=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span style="color:#b48ead;">while </span><span>n&lt;</span><span style="color:#d08770;">10</span><span>:</span><span>
</span><span>
</span><span>  n=n+</span><span style="color:#d08770;">1</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">if </span><span>n==</span><span style="color:#d08770;">8</span><span>:</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">continue</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span></code></pre>
<p>pass：用于循环语句、条件语句、函数语句中，主要作用是占空，保证语句的完整。</p>
<p>猜数字游戏</p>
<p>随机一个1-100的数字来猜，根据猜测的数字分别给一个提示（大了，小了或者猜对了），猜对之后返回猜测了几次</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>random</span><span>
</span><span>answer=random.</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">100</span><span>)</span><span>
</span><span>counter=</span><span style="color:#d08770;">0</span><span>
</span><span style="color:#b48ead;">while </span><span style="color:#d08770;">True</span><span>:</span><span>
</span><span>	counter+=</span><span style="color:#d08770;">1</span><span>
</span><span>	number=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">请输入猜测的数字:</span><span>&#39;))</span><span>
</span><span style="color:#b48ead;">if </span><span>number&gt;answer:</span><span>
</span><span>	</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">猜大了</span><span>&#39;)</span><span>
</span><span style="color:#b48ead;">elif </span><span>number&lt;answer:</span><span>
</span><span>	</span><span style="color:#96b5b4;">print </span><span>(&#39;</span><span style="color:#a3be8c;">猜小了</span><span>&#39;)</span><span>
</span><span style="color:#b48ead;">else</span><span>:</span><span>
</span><span>	</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">恭喜你猜对了</span><span>&#39;)</span><span>
</span><span>	</span><span style="color:#b48ead;">break</span><span>
</span><span style="color:#b48ead;">if </span><span>counter&gt;</span><span style="color:#d08770;">8</span><span>:</span><span>
</span><span>	</span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">你是傻子吗？</span><span>&quot;)</span><span>
</span><span style="color:#96b5b4;">print </span><span>(&#39;</span><span style="color:#a3be8c;">随机数是</span><span style="color:#d08770;">%d</span><span>&#39;%answer)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">你总共猜了</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">次</span><span>&#39;% counter)</span><span>
</span></code></pre>
<p>输出一个九九乘法表</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">10</span><span>):</span><span>
</span><span>	</span><span style="color:#b48ead;">for </span><span>j </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,i+</span><span style="color:#d08770;">1</span><span>):</span><span>
</span><span>		</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">*</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">=</span><span style="color:#d08770;">%d</span><span>&#39;%(i,j,i*j),</span><span style="color:#bf616a;">end</span><span>=&#39;</span><span style="color:#96b5b4;">\t</span><span>&#39;)</span><span>
</span><span style="color:#96b5b4;">print</span><span>()</span><span>
</span></code></pre>
<p>迭代器</p>
<p>迭代（Iteration）指的是对可迭代对象进行从头到尾遍历的过程，例如for循环的底层原理就是一个迭代</p>
<p>迭代器（iterator）指的是通过iter()函数返回的一个支持next()方法的对象</p>
<p>迭代方法</p>
<p>iter() 通过iter()可以获得可迭代对象，默认可迭代对象没有next()函数，通过iter()迭代函数赋予next()</p>
<p>next（）返回可迭代对象中的下一个元素，如果检查到StopIteration异常终止迭代</p>
<p>可迭代对象：列表、元组、字符串、字典、文件</p>
<p>迭代的原理？</p>
<p>可迭代对象在进行遍历的时候，自动调用iter()获取迭代器，自动调用next()方法获取下一个元素</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span>[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>]</span><span>
</span><span>l=[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>] ----&gt; </span><span style="color:#96b5b4;">iter</span><span>(l)--</span><span style="color:#96b5b4;">next</span><span>(l)</span><span>
</span></code></pre>
<p>手工迭代列表</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>l=[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>]</span><span>
</span><span>I=</span><span style="color:#96b5b4;">iter</span><span>(l)</span><span>
</span><span>I</span><span>
</span><span style="color:#96b5b4;">next</span><span>(I)</span><span>
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Fab</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">object</span><span style="color:#eff1f5;">):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">max</span><span>,):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.max=</span><span style="color:#96b5b4;">max</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.n,</span><span style="color:#bf616a;">self</span><span>.a,</span><span style="color:#bf616a;">self</span><span>.b=</span><span style="color:#d08770;">0</span><span>,</span><span style="color:#d08770;">0</span><span>,</span><span style="color:#d08770;">1</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__iter__</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__next__</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.n &lt; </span><span style="color:#bf616a;">self</span><span>.max:</span><span>
</span><span>            out = </span><span style="color:#bf616a;">self</span><span>.b</span><span>
</span><span>            </span><span style="color:#bf616a;">self</span><span>.a,</span><span style="color:#bf616a;">self</span><span>.b=</span><span style="color:#bf616a;">self</span><span>.b,</span><span style="color:#bf616a;">self</span><span>.a+</span><span style="color:#bf616a;">self</span><span>.b</span><span>
</span><span>            </span><span style="color:#bf616a;">self</span><span>.n = </span><span style="color:#bf616a;">self</span><span>.n+</span><span style="color:#d08770;">1</span><span>
</span><span>            </span><span style="color:#b48ead;">return </span><span>out</span><span>
</span><span>        </span><span style="color:#b48ead;">raise </span><span style="color:#bf616a;">StopIteration</span><span>()</span><span>
</span><span>    </span><span>
</span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#bf616a;">Fab</span><span>(</span><span style="color:#d08770;">6</span><span>):</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(i)</span><span>
</span></code></pre>
<p>通过try…except…自动迭代列表</p>
<p><img src="images/Python/clip_image002.png" alt="img" /></p>
<p>通过for循环自动迭代列表</p>
<p>列表解析</p>
<p>动态的创建列表</p>
<p>列表解析是迭代技术的一个应用，采用for循环和迭代函数动态生成列表，简洁方便</p>
<p>[X for Y in Z]</p>
<p>[X for Y in Z if J]</p>
<p>生成器表达式</p>
<p>生成器（generator）是特定的函数，容许返回一个值，然后“暂停”代码的执行，稍后恢复</p>
<p>生成器函数</p>
<p>在Python中，带有yield的函数称之为生成器，使用yield语句一次返回一个结果，在每一个结果之间挂起和继续它们的状态。</p>
<p>生成器表达式是生成器的应用，是列表解析和生成器的结合。</p>
<p>生成器表达式是按需返回产生结果的一个对象，而不是返回一整个结果列表</p>
<p>列表解析是直接生成最终的列表，而生成器表达式按需生成更加节省内存空间</p>
<p>语法</p>
<p>（X for Y in Z）</p>
<p>列表解析用中括号，生成器表达式用小括号</p>
<p>练习1：寻找水仙花数</p>
<p>如果一个位数等于其他各位数字的立方和，则这个数就称为水仙花数</p>
<p>求100-999之间的水仙花数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">100</span><span>,</span><span style="color:#d08770;">1000</span><span>):</span><span>
</span><span>
</span><span>  a=i//</span><span style="color:#d08770;">100</span><span>
</span><span>
</span><span>  b=(i-a*</span><span style="color:#d08770;">100</span><span>)//</span><span style="color:#d08770;">10</span><span>
</span><span>
</span><span>  c=(i-a*</span><span style="color:#d08770;">100</span><span>-b*</span><span style="color:#d08770;">10</span><span>)</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">if </span><span>i==a**</span><span style="color:#d08770;">3</span><span>+b**</span><span style="color:#d08770;">3</span><span>+c**</span><span style="color:#d08770;">3</span><span>:</span><span>
</span><span>
</span><span>​    </span><span style="color:#96b5b4;">print</span><span>(i)</span><span>
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">100</span><span>,</span><span style="color:#d08770;">1000</span><span>):</span><span>
</span><span>
</span><span>  a=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#bf616a;">str</span><span>(i)[</span><span style="color:#d08770;">0</span><span>])  </span><span style="color:#65737e;"># &#39;153&#39;</span><span style="color:#65737e;">
</span><span>
</span><span>  b=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#bf616a;">str</span><span>(i)[</span><span style="color:#d08770;">1</span><span>])</span><span>
</span><span>
</span><span>  c=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#bf616a;">str</span><span>(i)[</span><span style="color:#d08770;">2</span><span>])</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">if </span><span>i == a**</span><span style="color:#d08770;">3</span><span>+b**</span><span style="color:#d08770;">3</span><span>+c**</span><span style="color:#d08770;">3</span><span>:</span><span>
</span><span>
</span><span>​    </span><span style="color:#96b5b4;">print</span><span>(i)</span><span>
</span></code></pre>
<p>练习2：寻找1000以内的完美数</p>
<p>找出一个数的所有因数（约数），如果这些因数（除去它本身）的和等于该数，则它就是完美数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>l=[]</span><span>
</span><span>
</span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">1001</span><span>):</span><span>
</span><span>
</span><span>  k=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>j </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,i):</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">if</span><span>(i%j==</span><span style="color:#d08770;">0</span><span>):</span><span>
</span><span>
</span><span>​      k=k+j</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">if </span><span>i==k:</span><span>
</span><span>
</span><span>​    l.</span><span style="color:#bf616a;">append</span><span>(i)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(l)</span><span>
</span></code></pre>
<p>百鸡百钱问题</p>
<p>百钱买百鸡：现有100钱，公鸡5文钱一只，母鸡3文钱一只，小鸡一文钱3只 要求：公鸡、母鸡，小鸡都要有，把100文钱花完，买的鸡的数量正好是100。 问：一共能买多少只公鸡，多少只母鸡，多少只小鸡？</p>
<p></p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#65737e;"># a+b+3c=100</span><span style="color:#65737e;">
</span><span>
</span><span>\</span><span style="background-color:#bf616a;color:#2b303b;"># 5a+3b+c=100</span><span>
</span><span>
</span><span style="color:#b48ead;">for </span><span>a </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">20</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>b </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">34</span><span>):</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">for </span><span>c </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">100</span><span>):</span><span>
</span><span>
</span><span>​      </span><span style="color:#b48ead;">if </span><span>a+b+</span><span style="color:#d08770;">3</span><span>*c==</span><span style="color:#d08770;">100</span><span>:</span><span>
</span><span>
</span><span>​        </span><span style="color:#b48ead;">if </span><span style="color:#d08770;">5</span><span>*a+</span><span style="color:#d08770;">3</span><span>*b+c==</span><span style="color:#d08770;">100</span><span>:</span><span>
</span><span>
</span><span>​          </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">公鸡：</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">母鸡：</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">小鸡：</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只</span><span style="color:#96b5b4;">\n</span><span>&quot;%(a,b,</span><span style="color:#d08770;">3</span><span>*c))</span><span>
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">for </span><span>gongji </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">101</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>muji </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">101</span><span>):</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">for </span><span>xiaoji </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">101</span><span>):</span><span>
</span><span>
</span><span>​      </span><span style="color:#b48ead;">if </span><span>gongji*</span><span style="color:#d08770;">5</span><span>+muji*</span><span style="color:#d08770;">3</span><span>+xiaoji==</span><span style="color:#d08770;">100</span><span>:</span><span>
</span><span>
</span><span>​        </span><span style="color:#b48ead;">if </span><span>gongji+muji+</span><span style="color:#d08770;">3</span><span>*xiaoji==</span><span style="color:#d08770;">100</span><span>:</span><span>
</span><span>
</span><span>​          </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">公鸡有</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只,母鸡有</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只,小鸡有</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只</span><span>&#39;%(gongji,muji,</span><span style="color:#d08770;">3</span><span>*xiaoji))</span><span>
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">for </span><span>gongji </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">101</span><span>,</span><span style="color:#d08770;">5</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>muji </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">3</span><span>,</span><span style="color:#d08770;">101</span><span>-gongji,</span><span style="color:#d08770;">3</span><span>):</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">for </span><span>xiaoji </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">101</span><span>-gongji-muji):</span><span>
</span><span>
</span><span>​      </span><span style="color:#b48ead;">if </span><span>gongji//</span><span style="color:#d08770;">5</span><span>+muji//</span><span style="color:#d08770;">3</span><span>+xiaoji*</span><span style="color:#d08770;">3</span><span>==</span><span style="color:#d08770;">100 </span><span>and gongji+muji+xiaoji==</span><span style="color:#d08770;">100</span><span>:</span><span>
</span><span>
</span><span>​        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">公鸡有</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只,母鸡有</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只,小鸡有</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">只</span><span>&#39;%(gongji//</span><span style="color:#d08770;">5</span><span>,muji//</span><span style="color:#d08770;">3</span><span>,xiaoji*</span><span style="color:#d08770;">3</span><span>))</span><span>
</span></code></pre>
<p>Crap摇骰子游戏</p>
<p>玩家摇两颗骰子，如果第一次摇出7点或者11点，玩家胜</p>
<p>如果摇出2点、3点、12点，庄家胜</p>
<p>其他情况继续游戏</p>
<p>玩家再次摇骰子，如果摇出7点，庄家胜</p>
<p>如果摇出第一次摇的点数，玩家胜</p>
<p>否则游戏继续，玩家继续摇骰子</p>
<p>玩家进入游戏的时候有1000元赌注，全部输光游戏结束</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>randint </span><span style="color:#65737e;">#从random模块导入randint函数</span><span style="color:#65737e;">
</span><span>
</span><span> </span><span>
</span><span>
</span><span>money=</span><span style="color:#d08770;">1000</span><span>
</span><span>
</span><span style="color:#b48ead;">while </span><span>money&gt;</span><span style="color:#d08770;">0</span><span>:</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">你的资产为：</span><span>&#39;,money)</span><span>
</span><span>
</span><span>  needs_go_on=</span><span style="color:#d08770;">False</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">while </span><span style="color:#d08770;">True</span><span>:</span><span>
</span><span>
</span><span>​    xiazhu=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">请下注:</span><span>&#39;))</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">if </span><span>xiazhu&gt;</span><span style="color:#d08770;">0 </span><span>and xiazhu&lt;=money:</span><span>
</span><span>
</span><span>​      </span><span style="color:#b48ead;">break</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span>  first=</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">6</span><span>)+</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">6</span><span>)</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">玩家摇出的点数是</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">点：</span><span>&#39;%first)</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">if </span><span>first==</span><span style="color:#d08770;">7 </span><span>or first==</span><span style="color:#d08770;">11</span><span>:</span><span>
</span><span>
</span><span>​    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">玩家胜！</span><span>&#39;)</span><span>
</span><span>
</span><span>​    money+=xiazhu</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">elif </span><span>first==</span><span style="color:#d08770;">2 </span><span>or first==</span><span style="color:#d08770;">3 </span><span>or first==</span><span style="color:#d08770;">12</span><span>:</span><span>
</span><span>
</span><span>​    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">庄家胜！</span><span>&#39;)</span><span>
</span><span>
</span><span>​    money-=xiazhu</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">else</span><span>:</span><span>
</span><span>
</span><span>​    needs_go_on=</span><span style="color:#d08770;">True</span><span>
</span><span>
</span><span>​    </span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">while </span><span>needs_go_on:</span><span>
</span><span>
</span><span>​    second=</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">6</span><span>)+</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">6</span><span>)</span><span>
</span><span>
</span><span>​    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">玩家摇出的点数是</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">点：</span><span>&#39;%second)</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">if </span><span>second==</span><span style="color:#d08770;">7</span><span>:</span><span>
</span><span>
</span><span>​      </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">庄家胜！</span><span>&#39;)</span><span>
</span><span>
</span><span>​      money-=xiazhu</span><span>
</span><span>
</span><span>​      needs_go_on=</span><span style="color:#d08770;">False</span><span>
</span><span>
</span><span>​    </span><span style="color:#b48ead;">elif </span><span>second==first:</span><span>
</span><span>
</span><span>​      </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">玩家胜！</span><span>&#39;)</span><span>
</span><span>
</span><span>​      money+=xiazhu</span><span>
</span><span>
</span><span>​      needs_go_on=</span><span style="color:#d08770;">False</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">你已经破产了！</span><span>&#39;)  </span><span>
</span></code></pre>
<p>Python函数</p>
<p>函数是一组可重复使用，有特定功能的代码块</p>
<p>函数功能：</p>
<p>可以重复使用</p>
<p>减少程序代码量</p>
<p>提高代码的可读性</p>
<p>函数的原理</p>
<p>调用函数 （调用Python内建函数）</p>
<p>通过为函数传入参数，即可得到相关的返回结果</p>
<p>函数使用过程中，我们无需知道函数内部的实现原理</p>
<p>不同函数需要参数的个数和类型是不同的</p>
<p>创建函数</p>
<p>def 函数名（参数）：</p>
<p>‘函数说明’</p>
<p>函数代码块（函数体）</p>
<p>return xx</p>
<p>函数名与变量的命名规则是一样的，可以包括下划线、数字、字母等</p>
<p>括号内可以设置参数，也可以没有参数</p>
<p>函数说明是可选，用于解释该函数的功能，对程序员更加友好</p>
<p>函数代码块采用的是4个空格缩进，由变量、参数、表达式等语句组成</p>
<p>return为函数的可选部分</p>
<p>若不包括return，这个函数被称为“不返回值函数”，相当于return None</p>
<p>若包括return，这个函数被称为“返回值函数”</p>
<p>不带参函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">hello</span><span>():</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">hello,world</span><span>&#39;)</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">hello</span><span>()</span><span>
</span></code></pre>
<p>带参函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">hello</span><span>(</span><span style="color:#bf616a;">name</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">hello</span><span>&#39;,name)</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">hello</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;)</span><span>
</span><span>
</span><span> </span><span>
</span></code></pre>
<p>返回值函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">hello</span><span>(</span><span style="color:#bf616a;">name</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">hello</span><span>&#39;,name)</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">return </span><span>name*</span><span style="color:#d08770;">2</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">hello</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;)</span><span>
</span></code></pre>
<p>带函数说明函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">hello</span><span>(</span><span style="color:#bf616a;">name</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#65737e;">&#39;&#39;&#39;这是一个hello函数&#39;&#39;&#39;</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">hello</span><span>&#39;,name)</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">return </span><span>name*</span><span style="color:#d08770;">2</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">hello</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(hello.__doc__) </span><span style="color:#65737e;">#用来查看函数说明</span><span style="color:#65737e;">
</span></code></pre>
<p>函数参数</p>
<p>\1.   位置参数</p>
<p>函数根据位置顺序将参数传入函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">sum</span><span>(</span><span style="color:#bf616a;">a</span><span>,</span><span style="color:#bf616a;">b</span><span>)</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">return </span><span>a+b</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#96b5b4;">sum</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>)</span><span>
</span></code></pre>
<p>\2.   默认参数</p>
<p>函数将部分参数指向默认值，后续可以不用为此参数传入值。如果默认参数所在位置有传入值，则默认参数指定的值被覆盖</p>
<p>\3.   关键字参数</p>
<p>使用关键字参数容许函数在调用时参数的顺序与声明时不一致。</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">sum</span><span>(</span><span style="color:#bf616a;">a</span><span>,</span><span style="color:#bf616a;">b</span><span>):</span><span>
</span><span>
</span><span>  c=a+b</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(c)</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#96b5b4;">sum</span><span>(</span><span style="color:#bf616a;">b</span><span>=</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#bf616a;">a</span><span>=</span><span style="color:#d08770;">3</span><span>)</span><span>
</span></code></pre>
<p>\4.   可变长参数</p>
<p>非关键字可变长参数（*元组）</p>
<p>def func(*tuple)</p>
<p>通过*获取可变数量的参数，并全部放入元组</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>(*</span><span style="color:#bf616a;">args</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(args)</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">f</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>)</span><span>
</span></code></pre>
<p>关键字可变长参数（**字典）</p>
<p>def func(**字典)</p>
<p>通过**获取可变数量的参数，并全部放入字典</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>(**</span><span style="color:#bf616a;">dict</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(dict)</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">f</span><span>(</span><span style="color:#bf616a;">a</span><span>=</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#bf616a;">b</span><span>=</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#bf616a;">c</span><span>=</span><span style="color:#d08770;">3</span><span>)</span><span>
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">doprint</span><span>(</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>=</span><span style="color:#d08770;">18</span><span>,*</span><span style="color:#bf616a;">list</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">姓名:</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;"> 年龄:</span><span style="color:#d08770;">%d</span><span>&quot;%(name,age))</span><span>
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span>list:</span><span>
</span><span>
</span><span>​    </span><span style="color:#96b5b4;">print</span><span>(i)</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">doprint</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">19</span><span>,&#39;</span><span style="color:#a3be8c;">hello</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">world</span><span>&#39;)</span><span>
</span></code></pre>
<p>\5.   混合参数</p>
<p>函数在定义参数列表时，可以同时包含位置参数，默认参数，关键字参数，可变参数</p>
<p>混合参数需要按照特定位置放置：位置参数-默认参数-可变参数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">func</span><span>(</span><span style="color:#bf616a;">x</span><span>,</span><span style="color:#bf616a;">y</span><span>=</span><span style="color:#d08770;">1</span><span>,*</span><span style="color:#bf616a;">tuple</span><span>,**</span><span style="color:#bf616a;">dict</span><span>):</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(x)</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(y)</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(tuple)</span><span>
</span><span>
</span><span>  </span><span style="color:#96b5b4;">print</span><span>(dict)</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span style="color:#bf616a;">func</span><span>(</span><span style="color:#d08770;">10</span><span>,</span><span style="color:#d08770;">20</span><span>,</span><span style="color:#d08770;">30</span><span>,</span><span style="color:#d08770;">40</span><span>,</span><span style="color:#bf616a;">j</span><span>=</span><span style="color:#d08770;">33</span><span>)</span><span>
</span></code></pre>
<p>在混合参数中，不能使用关键字参数，在调用函数传参的时候，不要使用赋值语句（字典传参例外）</p>
<p>变量作用域</p>
<p>在函数内部定义的变量称为局部变量</p>
<p>变量的作用域指的是该变量能够被使用的范围</p>
<p>局部变量只能在其所属函数中使用</p>
<p>在函数外面，不能访问函数的局部变量</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">A</span><span>():</span><span>
</span><span>    a=</span><span style="color:#d08770;">1</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">B</span><span>():</span><span>
</span><span>    a=</span><span style="color:#d08770;">2</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span><span>
</span><span>a=</span><span style="color:#d08770;">3</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span></code></pre>
<p>全局变量</p>
<p>在函数外部定义的变量称为全局变量</p>
<p>全局变量能够被整个程序范围调用</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">C</span><span>():</span><span>
</span><span>    c=a+b</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(c)</span><span>
</span><span>
</span><span>a=</span><span style="color:#d08770;">10</span><span>
</span><span>b=</span><span style="color:#d08770;">10</span><span>
</span><span>
</span><span style="color:#bf616a;">C</span><span>()</span><span>
</span><span>
</span><span>name=&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">hello</span><span>():</span><span>
</span><span>    </span><span style="color:#b48ead;">global </span><span>name </span><span style="color:#65737e;">#调用外部变量</span><span style="color:#65737e;">
</span><span>    name=&#39;</span><span style="color:#a3be8c;">haha</span><span>&#39; </span><span style="color:#65737e;">#重新赋值</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">Hi</span><span>&#39;,name)</span><span>
</span><span>
</span><span style="color:#bf616a;">hello</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(name)</span><span>
</span></code></pre>
<p>函数式编程</p>
<p>函数式编程是一种高级的编程方法，采用一系列的函数来解决问题，函数式编程是一种面向过程的实现，数据经过不断的输入输出处理。函数式编程采用高阶函数来实现复杂的处理。支持递归、闭包、装饰器等高级特性。</p>
<p>什么是高阶函数？</p>
<p>高阶函数至少包含以下条件之一：</p>
<p>函数作为参数被传入</p>
<p>函数作为结果被输出</p>
<p>lambda/map/reduce/filter 等内置函数、返回函数、递归函数、装饰器等都是高阶函数的应用和实现</p>
<p>内置高阶函数</p>
<p>lambda函数：</p>
<p>匿名函数，当需要一个函数但是不需要这个函数名称的时候，就可以通过lambda表达式来实现 </p>
<p>语法：lambda 参数:表达式</p>
<p>​			lambda x,y:x+y</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>a=</span><span style="color:#b48ead;">lambda </span><span style="color:#bf616a;">x</span><span>,</span><span style="color:#bf616a;">y</span><span>:x+y</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">a</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>))</span><span>
</span></code></pre>
<p>map函数</p>
<p>map函数接收两个参数，第一个是函数，第二个是列表（可迭代对象）</p>
<p>将函数作用在列表的每个元素上，然后创建由每次函数应用组成的返回值里面</p>
<p>map函数能够用列表解析表达式来实现</p>
<p>map(函数,列表) </p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>a= </span><span style="color:#96b5b4;">map</span><span>((</span><span style="color:#b48ead;">lambda </span><span style="color:#bf616a;">x</span><span>:x*x),[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>])</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span><span>显示的结果是map对象，不会出现列表[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">4</span><span>,</span><span style="color:#d08770;">9</span><span>]</span><span>
</span><span>
</span><span>a=</span><span style="color:#bf616a;">list</span><span>(</span><span style="color:#96b5b4;">map</span><span>((</span><span style="color:#b48ead;">lambda </span><span style="color:#bf616a;">x</span><span>:x*x),[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>])) </span><span style="color:#65737e;">#转换为列表对象</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span><span>
</span><span>等价于：</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">a</span><span>(</span><span style="color:#bf616a;">x</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>x*x</span><span>
</span><span>l=[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>]</span><span>
</span><span style="color:#96b5b4;">map</span><span>(a,l)</span><span>
</span></code></pre>
<p>reduce函数</p>
<p>与map类似，也是接收函数和列表</p>
<p>区别在于reduce将列表中两个元素放入函数计算得到值，然后将值和列表中的下一个元素再放入函数计算得到另一个值，最终会得到一个值</p>
<p>语法：</p>
<p>reduce(函数,列表)</p>
<p>reduce(func,[1,2,3]) </p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>functools </span><span style="color:#b48ead;">import </span><span style="color:#96b5b4;">reduce</span><span>
</span><span>a=</span><span style="color:#96b5b4;">reduce</span><span>((</span><span style="color:#b48ead;">lambda </span><span style="color:#bf616a;">x</span><span>,</span><span style="color:#bf616a;">y</span><span>: x+y),[</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>,</span><span style="color:#d08770;">4</span><span>])</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span></code></pre>
<p>Python2中可以直接调用reduce函数，Python3需要从模块functools先导入</p>
<p>filter函数</p>
<p>是一个过滤函数，根据Ture或者False来决定最终的结果，如果是True则保留下来</p>
<p>filter(函数,列表) </p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">pos</span><span>(</span><span style="color:#bf616a;">n</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>n&gt;</span><span style="color:#d08770;">0</span><span>
</span><span>a=</span><span style="color:#bf616a;">list</span><span>(</span><span style="color:#96b5b4;">filter</span><span>(pos,[-</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">0</span><span>,</span><span style="color:#d08770;">2</span><span>,-</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>])) </span><span style="color:#65737e;">#可以转换成list来查看结果</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span></code></pre>
<p>返回函数</p>
<p>函数作为结果被输出</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">sum</span><span>(</span><span style="color:#bf616a;">x</span><span>,</span><span style="color:#bf616a;">y</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">sum1</span><span>():</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span>x+y </span><span style="color:#65737e;">#里层函数调用外层函数的参数，属于闭包</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">return </span><span>sum1  </span><span style="color:#65737e;">#sum1是里层函数，在这里被当做结果输出，所以这是一个返回函数</span><span style="color:#65737e;">
</span><span>
</span><span>a=</span><span style="color:#96b5b4;">sum</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>) </span><span style="color:#65737e;">#创建变量a，赋值为函数sum()，传入参数1，2</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">a</span><span>())</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">closure</span><span>():</span><span>
</span><span>    i=</span><span style="color:#d08770;">10</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">clo2</span><span>():</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span>i*i </span><span style="color:#65737e;">#底层调用外层函数的变量，也属于闭包</span><span style="color:#65737e;">
</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>clo2</span><span>
</span><span>
</span><span>a=</span><span style="color:#bf616a;">closure</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">a</span><span>())</span><span>
</span></code></pre>
<p>闭包</p>
<p>如果在一个内部函数里，对在外部作用域（但不在全局作用域）的变量进行引用，那么内部函数就被认为闭包（closure） </p>
<p>装饰器（闭包是调用变量，装饰器调用函数）</p>
<p>decorator采用函数作为参数，然后对此函数进行装饰，增强其功能。装饰器可以为函数增加功能，但是无需修改原有函数内部结构</p>
<p>装饰器是闭包的高阶应用</p>
<p>闭包是内部函数调用外部函数的变量，装饰器是调用函数</p>
<ol>
<li>
<p>定义装饰器</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">deco</span><span>(</span><span style="color:#bf616a;">func</span><span>):</span><span>
</span><span>
</span><span>​	</span><span style="background-color:#bf616a;color:#2b303b;">def</span><span> </span><span style="color:#bf616a;">wrapper</span><span>()</span><span>
</span><span>
</span><span>​		函数体包括func</span><span>
</span><span>
</span><span>​	</span><span style="color:#b48ead;">return </span><span>wrapper</span><span>
</span></code></pre>
</li>
<li>
<p>定义函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">func</span><span>():</span><span>
</span><span>	函数体</span><span>
</span></code></pre>
</li>
<li>
<p>装饰函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>@</span><span style="color:#bf616a;">deco</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">func</span><span>():</span><span>
</span><span>
</span><span>​	函数体</span><span>
</span></code></pre>
</li>
</ol>
<p>例子1：不带参数的装饰器</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">deco</span><span>(</span><span style="color:#bf616a;">func</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">wrapper</span><span>():</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a decorator</span><span>&#39;)</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">func</span><span>()</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>wrapper</span><span>
</span><span>
</span><span>@</span><span style="color:#bf616a;">deco</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>():</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a function</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#bf616a;">f</span><span>()</span><span>
</span></code></pre>
<p>例子2：带参数的装饰器</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">deco</span><span>(</span><span style="color:#bf616a;">func</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">wrapper</span><span>(</span><span style="color:#bf616a;">n</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a decorator</span><span>&#39;,n)</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">func</span><span>(n)</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>wrapper</span><span>
</span><span>
</span><span>@</span><span style="color:#bf616a;">deco</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>(</span><span style="color:#bf616a;">n</span><span>):</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a function</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#bf616a;">f</span><span>(&#39;</span><span style="color:#a3be8c;">test</span><span>&#39;)</span><span>
</span></code></pre>
<p><strong>注意：：：</strong></p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>():</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a function</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">555</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">f</span><span>()) </span><span>
</span><span style="color:#65737e;"># 输出：</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a function</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># 555</span><span style="color:#65737e;">
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">deco</span><span>(</span><span style="color:#bf616a;">func</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">wrapper</span><span>():</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a decorator</span><span>&#39;)</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">func</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(wrapper)</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>wrapper</span><span>
</span><span>
</span><span>@</span><span style="color:#bf616a;">deco</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>():</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a function</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#bf616a;">f</span><span>()</span><span>
</span><span>
</span><span style="color:#65737e;"># 输出：</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># &lt;function deco.&lt;locals&gt;.wrapper at 0x04C02268&gt;</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a decorator</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a function</span><span style="color:#65737e;">
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">deco</span><span>(</span><span style="color:#bf616a;">func</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">wrapper</span><span>():</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a decorator</span><span>&#39;)</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">func</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">wrapper</span><span>())</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>wrapper</span><span>
</span><span>
</span><span>@</span><span style="color:#bf616a;">deco</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>():</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a function</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#bf616a;">f</span><span>()</span><span>
</span><span>
</span><span style="color:#65737e;"># 输出：</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a decorator  第5行输出</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a function   第5行输出</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># None                 第5行输出</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a decorator  第4行输出（由于第6行的存在）</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a function   第4行输出（由于第6行的存在）</span><span style="color:#65737e;">
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">f</span><span>():</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a function</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">wrapper</span><span>():</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">this is a decorator</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">f</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">wrapper</span><span>())</span><span>
</span><span>
</span><span style="color:#bf616a;">f</span><span>()</span><span>
</span><span>
</span><span style="color:#65737e;"># 输出：</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a decorator  第7行输出</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a function   第7行输出</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># None                 第7行输出</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># this is a function   第9行输出</span><span style="color:#65737e;">
</span></code></pre>
<p>递归函数</p>
<p>若函数内部调用自身，这个函数就是递归函数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">fact</span><span>(</span><span style="color:#bf616a;">n</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">if </span><span>n==</span><span style="color:#d08770;">1</span><span>:</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">1</span><span>
</span><span>    </span><span style="color:#b48ead;">else</span><span>:</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span>n*</span><span style="color:#bf616a;">fact</span><span>(n-</span><span style="color:#d08770;">1</span><span>)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">fact</span><span>(</span><span style="color:#d08770;">5</span><span>))</span><span>
</span></code></pre>
<p>生成器</p>
<p>在Python中，带有yield的函数被称之为generator（生成器）</p>
<p>生成器是特定的函数，允许返回一个值，然后“暂停“代码的执行，稍后恢复</p>
<p>使用yield语句一次返回一个结果，在每个结果之间挂起和继续它们的状态</p>
<p>通过生成器，可以节省内存空间，使得函数的结果散落在不同时间的请求上</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#65737e;">#编写一个生成器函数</span><span style="color:#65737e;">
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">num</span><span>():</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">first</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#b48ead;">yield</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">second</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#b48ead;">yield</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">third</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#b48ead;">yield</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">over</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#65737e;">#产生生成器对象</span><span style="color:#65737e;">
</span><span>a=</span><span style="color:#bf616a;">num</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#96b5b4;">next</span><span>(a))</span><span>
</span></code></pre>
<p>return和yield区别</p>
<p>return返回结果并结束函数</p>
<p>yield返回结果并挂起当前状态，并与下次再执行</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">abc</span><span>(</span><span style="color:#bf616a;">N</span><span>):</span><span>
</span><span>    </span><span style="color:#96b5b4;">sum</span><span>=</span><span style="color:#d08770;">0</span><span>
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(N):</span><span>
</span><span>        </span><span style="color:#96b5b4;">sum</span><span>+=i</span><span>
</span><span>        </span><span style="color:#b48ead;">yield </span><span>(</span><span style="color:#96b5b4;">sum</span><span>)</span><span>
</span></code></pre>
<p>Python模块</p>
<p>模块是一系列函数、变量、类的组成</p>
<p>Python程序是有一系列的模块文件组成，一个.py的文件就是一个模块</p>
<p><img src="images/Python/image-20200819220944321.png" alt="image-20200819220944321" /></p>
<p>模块的功能</p>
<p>提高代码重用率：需要用到某些函数，直接调用某个模块即可，无需重复编写</p>
<p>提高程序层次性：不同功能函数放入不同模块，可以提高逻辑性和层次性</p>
<p>方便协作防止冲突：函数和变量在不同模块下可以有同样命名，但是不会冲突。这样多人协作时，即便命名冲突也不会干扰</p>
<p>模块原理</p>
<p>1.模块创建</p>
<p>用代码编辑器编写代码并保存为py文件</p>
<p>2.模块导入</p>
<p>import Module</p>
<p>导入整个模块到内存</p>
<p>采用点号调用函数或者变量 Module.func1</p>
<p>不会覆盖本地命名（变量、函数等）</p>
<p>from Module import Func</p>
<p>导入模块某个函数或变量到内存中</p>
<p>直接调用此函数或者变量</p>
<p>会覆盖本地某个相同命名（变量或者函数等）</p>
<p>from Module import *</p>
<p>导入整个模块到内存</p>
<p>直接调用此模块所有函数或者变量</p>
<p>会覆盖本地某个相同命名（变量或者函数等）</p>
<p>Python只会导入同一个模块一次，若再次通过import或者from命令导入同一个模块，Python不会重新加载，而是直接从内存中寻找</p>
<p>reload Module 重新加载模块</p>
<p>模块导入的流程</p>
<p>\1. 搜索模块路径</p>
<p>\2. 编译成字节码（执行更快）</p>
<p>\3. 将模块定义的函数、变量、类等导入运行</p>
<p>模块路径</p>
<p>搜索路径</p>
<p>\1. 程序运行目录（Python安装目录）</p>
<p>\2. 环境变量设置的（PYTHONPATH）</p>
<p>PYTHONPATH是设置包括Python程序文件的目录的列表，这些目录可以是用户自定义的或者平台特定的目录名</p>
<p>\3. 标准库模块目录</p>
<p>标准库模块目录存储python内置的模块文件。Python会自动搜索标准库模块的路径</p>
<p>\4. .pth文件</p>
<p>查看路径</p>
<p>sys.path</p>
<p>pytthon会将模块搜索路径统一存储在sys模块中的path变量中</p>
<p>sys.path包括程序运行路径、PYTHONPATH、标准库路径，这些路径都以列表来存储</p>
<p>配置路径</p>
<p>\1. 通过sys.path来添加模块搜索路径</p>
<p>sys.path.append(‘路径’)</p>
<p>\2. 通过环境变量PYTHONPATH增加模块搜索路径</p>
<p>set PYTHONPATH=’路径’</p>
<p>\3. 通过文件.pth增加模块搜索路径</p>
<p>在site-packages路径增加一个路径文件，如sitepath.pth，再往该文件中添加模块所在路径即可。</p>
<p>模块互导</p>
<p>模块和模块之间可以相互导入</p>
<p>拓展</p>
<p>if <strong>name</strong>==’<strong>main</strong>’:</p>
<p>当模块直接执行时，模块的名字为‘<strong>main</strong>’</p>
<p>当模块被导入时，模块的名字是模块本身</p>
<p>一般情况下，在模块里面的测试代码例如print等输出，我们可以放置在这个判断语句后面，这样其他人调用我们的模块时，就不会有额外的输出</p>
<p>模块进阶</p>
<p>\1.   命名空间和作用域</p>
<p>命名空间是名字和对象的映射，命名空间是一个字典，其中键是名字，值是对象。</p>
<p>内建函数、函数、模块、类都有自己的命名空间</p>
<p>命名空间分为：</p>
<p>python的built-in names（内置命名，包括内置函数，内置常量，内置类型）</p>
<p>模块的全局名称 global names（模块命名，这个模块定义的函数，类，变量）</p>
<p>函数的局部名称 local names（函数命名）</p>
<p>函数命名-本地命名空间</p>
<p>模块命名-全局命名空间</p>
<p>内置命名-外层命名空间</p>
<p>命名空间通过__dict__属性和dir()函数来查看，可以看到模块能使用的方法属性，以及模块中的函数和变量</p>
<p>\2.   作用域</p>
<p>表示命名空间可被访问的范围</p>
<p>根据Python的命名空间，作用域有下面几个：</p>
<p>内部函数的局部作用域</p>
<p>外层函数的局部作用域</p>
<p>模块的全局作用域</p>
<p>Python内置对象的外层作用域</p>
<p>函数定义了本地作用域，模块定义了全局作用域</p>
<p>\3.   LEGB查找规则</p>
<p>当引用一个变量时，python按照以下顺序来查找：</p>
<p>先从内层函数的本地作用域查找，如果没有再查找外层函数的本地作用域，如果没有再查找全局作用域，最后查找外层作用域</p>
<p>LEGB规则：Local-Enclosed-Global-Built-in</p>
<p>本地作用域例子</p>
<p><img src="images/Python/clip_image002-1597895551787.png" alt="img" /></p>
<p>enclosing作用域</p>
<p><img src="images/Python/clip_image004.png" alt="img" /></p>
<p>global作用域</p>
<p><img src="images/Python/clip_image006.png" alt="img" /></p>
<p>built-in作用域</p>
<p><img src="images/Python/clip_image008.png" alt="img" /></p>
<p>\4.   模块互导作用域的影响</p>
<p>验证import Module</p>
<p>验证 from Module import x</p>
<p>验证 from Module import *</p>
<p>包</p>
<p>包是一种层次化的程序组织结构，由一系列的子包和模块组成</p>
<p><img src="images/Python/clip_image010.png" alt="img" /></p>
<p>包类似于模块，也可以通过import和from导入，通过点号进行访问</p>
<p>与模块最大的不同是，包通常是由模块和__init__文件组成</p>
<p>包导入语句的路径中，每一个目录内都必须有__init__.py文件，如果没有导入包会失败</p>
<p><strong>init</strong>.py是一个初始化模块，Python首次导入某个目录时，会自动执行该目录下__init__.py文件中的所有代码</p>
<p><strong>init</strong>.py可以是一个空文件，也可以为包执行初始化语句或设置变量等</p>
<p>导入语法</p>
<p>import d1</p>
<p>from d1.d3 import d3m1</p>
<p>包的功能：</p>
<p>解决模块命名冲突</p>
<p>简化模块搜索路径设置</p>
<p>实现模块与模块之间的关联</p>
<p>方便大型程序层次化组织</p>
<p>方便第三方组件拓展（第三方组件可以通过包来进行分发）</p>
<p><img src="images/Python/clip_image012.png" alt="img" /></p>
<p>如果包目录中，所有模块的名字是唯一的，导入的时候可以使用from…import语法来导入</p>
<p>如果模块名字有重叠，就通过import来导入，调用的时候采用点号方法，保证唯一性</p>
<p>包管理工具</p>
<p>包管理涉及打包、分发、下载、编译、安装等环节，不同环境由不同的包管理工具来执行</p>
<p>常见的包管理工具</p>
<p>distutils 可以实现包分发、安装等功能，是Python内置的包管理工具 通过setup.py执行</p>
<p>setuptools distutils的增加版，实现包分发、安装、下载、管理功能 通过ez_setup.py来安装setuptools</p>
<p>easy_install </p>
<p>pip</p>
<p>distribute 是setuptools的增强版</p>
<p>打包例子</p>
<p>打包的准备工作：</p>
<p><img src="images/Python/clip_image014.png" alt="img" /></p>
<p>下面是setup.py的设置</p>
<p><img src="images/Python/clip_image016.png" alt="img" /></p>
<p>执行打包的命令，在setup.py文件的路径下，调用python</p>
<p>python3 setup.py +发布格式</p>
<p>发布格式有两种：sdist bdist</p>
<p>sdist:创建源码发行包 默认的发布格式为gztar tar zip等（tar.gz）</p>
<p>bdist:创建二进制发行包 发布格式有rpm msi wininst (exe)</p>
<p>打包好之后可以把它发布到互联网，其他人下载之后可以这样来安装：</p>
<p>tar -zxvf d1-1.0.tar.gz 解压</p>
<p>cd d1-1.0 进入解压后的目录下</p>
<p>python3 setup.py install 执行包安装</p>
<p>如果要在windows安装，打包的时候发布格式可以选择bdist（python3 setup.py bdist_wininst）会生成exe安装文件，安装的时候直接双击安装即可。</p>
<p>Python面向对象-类</p>
<p>类的定义</p>
<p>类（class）是设计蓝图，用来创建不同类型的对象。Python内置有数字、字符串、列表、字典等对象，这些内置对象已经有规定好的属性和方法。如果需要创建新的对象类型。则需要使用类。</p>
<p>类是一种数据结构，可以用来定义对象，将数据值和行为特征结合在一起</p>
<p>类指定了对象将包含哪些数据和函数，数据一般是变量，函数一般我们称之为方法</p>
<p><img src="images/Python/image-20200820181424465.png" alt="image-20200820181424465" /></p>
<p>人（类）—小明（实例）—10岁，吃饭</p>
<p>​			   —小红（实例）—9岁，睡觉</p>
<p>类的功能：</p>
<p>对事物进行高度的抽象，提高代码的重用率（类可以创建子类和超类），提高程序的层次性（类支持继承）</p>
<p>类的语法：</p>
<p>class ClassName:</p>
<p>​	‘类的说明’</p>
<p>​	类的主体（定义类的数据属性和方法）</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    name=&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;  </span><span style="color:#65737e;">#变量属于类的数据属性</span><span style="color:#65737e;">
</span><span>    age=</span><span style="color:#d08770;">10</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printname</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span style="color:#65737e;">#函数属于类的方法属性</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">self</span><span>.name)</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">self</span><span>.age)</span><span>
</span></code></pre>
<p>构造函数，用于给实例/对象初始化参数，构造函数中第一个参数必须是self，代表实例或对象本身</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span style="color:#65737e;">#构造函数</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span></code></pre>
<p>类的实例</p>
<p>类是现实世界的抽象的实体，以编程的形式出现，而实例（instance）则是这些对象的具体化</p>
<p>通过实例化，类的方法属性才可以被调用，类的数据属性才可以被访问</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span style="color:#65737e;">#构造函数</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)  </span><span style="color:#65737e;">#创建实例，并传入三个参数给构造函数</span><span style="color:#65737e;">
</span><span>Xiaohong=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.name)  </span><span style="color:#65737e;">#访问实例的数据属性</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.age)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.gender)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaohong.</span><span style="color:#bf616a;">printage</span><span>())  </span><span style="color:#65737e;">#访问实例的方法属性</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(Xiaohong.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span></code></pre>
<p>类的属性</p>
<p>类的属性由数据和方法两部分组成，可以通过点号方式来访问</p>
<p>数据属性存储数据和变量值，方法属性存储操作数据的函数</p>
<p>调用语法：</p>
<p>实例.value</p>
<p>实例.method</p>
<p>属性访问</p>
<p>访问数据属性</p>
<p>数据属性仅仅是所定义的类的变量，数据属性就是静态变量和静态数据</p>
<p>类.value</p>
<p>实例.value</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)  </span><span>
</span><span>Xiaohong=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.version) </span><span style="color:#65737e;">#通过实例来访问数据属性</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(Person.version)  </span><span style="color:#65737e;">#通过类来访问数据属性</span><span style="color:#65737e;">
</span></code></pre>
<p>访问方法属性</p>
<p>类中定义的函数，称之为方法，方法有应用范围，只能在类里面，要调用方法，必须先实例化。</p>
<p>类中函数的原理：</p>
<ol>
<li>类内部的函数与其他的函数没有太大的区别，也可以设置默认参数、关键字参数等</li>
<li>类中所有的函数的第一个参数必须是self，创建实例时，实例名来代替self</li>
</ol>
<p>下面这个例子是方法属性有self参数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">():</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printver</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">self</span><span>.version)</span><span>
</span><span>
</span><span>P=</span><span style="color:#bf616a;">Person</span><span>()</span><span>
</span><span>P.</span><span style="color:#bf616a;">printver</span><span>()</span><span>
</span></code></pre>
<p>下面这个例子是方法属性没有self参数</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">():</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printver</span><span>():</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">self</span><span>.version)</span><span>
</span><span>
</span><span>P=</span><span style="color:#bf616a;">Person</span><span>()</span><span>
</span><span>P.</span><span style="color:#bf616a;">printver</span><span>()</span><span>
</span></code></pre>
<p><img src="images/Python/image-20200820181708538.png" alt="image-20200820181708538" /></p>
<p>调用函数时，实例P将自己传入，但是因为没有参数self，所以传入失败</p>
<ol start="3">
<li>很多类的第一个函数是构造函数，如果有构造函数，类在实例化的时候，不能传入空参数，必须传入与构造函数里面设置的参数匹配的参数</li>
</ol>
<p>下面这个例子没有构造函数：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">():</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setversion</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">v</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.v=v</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printver</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">self</span><span>.v)</span><span>
</span><span>
</span><span>P=</span><span style="color:#bf616a;">Person</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(P.version)</span><span>
</span><span>P.</span><span style="color:#bf616a;">setversion</span><span>(</span><span style="color:#d08770;">2.0</span><span>)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(P.</span><span style="color:#bf616a;">printver</span><span>())</span><span>
</span></code></pre>
<p>下面这个例子有构造函数：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">():</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">v</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.v=v</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printver</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">self</span><span>.v)</span><span>
</span><span>
</span><span>P=</span><span style="color:#bf616a;">Person</span><span>(</span><span style="color:#d08770;">3.0</span><span>)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(P.version)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(P.</span><span style="color:#bf616a;">printver</span><span>())</span><span>
</span></code></pre>
<p>绑定限制：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)  </span><span>
</span><span>Xiaohong=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Person.</span><span style="color:#bf616a;">printgender</span><span>()) </span><span style="color:#65737e;">#Python有严格要求，没有实例，方法/函数都不能被调用，这种限制称为绑定</span><span style="color:#65737e;">
</span></code></pre>
<p>属性修改：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)  </span><span>
</span><span>Xiaohong=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Person.version)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.version)</span><span>
</span><span>
</span><span>Xiaoming.version=</span><span style="color:#d08770;">2.0</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.version) </span><span style="color:#65737e;">#实例属性修改不影响类属性</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(Person.version)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.age)</span><span>
</span><span>Xiaoming.age=</span><span style="color:#d08770;">11</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.age)</span><span>
</span></code></pre>
<p>属性增加：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>Xiaoming.aihao=&#39;</span><span style="color:#a3be8c;">xuexi</span><span>&#39;</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.aihao)</span><span>
</span></code></pre>
<p>查看属性：</p>
<p>dir（）__ <strong>dict</strong>__</p>
<p>特殊类属性：</p>
<p>特殊类属性的命名方式以__value__方式命名，前后都有两个下划线</p>
<p>特殊类属性是Python的内置属性，所有创建的类默认都有</p>
<p>c.<strong>doc</strong> 查看类c的文档字符串</p>
<p>c.<strong>dict</strong> 查看类c的属性</p>
<p>c.<strong>name</strong> 查看类名</p>
<p>c.<strong>module</strong> 查看类c定义所在的模块</p>
<p>c.<strong>base</strong> 查看类的所有父类构成元素</p>
<p>类的继承：</p>
<p>当编写一个类的时候，可以从之前的类继承，这样就可以获取之前类的所有属性</p>
<p>新的类我们称为子类，而被继承的类称为父类/基类/超类</p>
<p>人（超类）—男人（子类）—小明（实例）</p>
<p>继承的语法：</p>
<p>class Parent():</p>
<p>​	…</p>
<p>class Child(Parent):  子类在父类上创建</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Male</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):  </span><span style="color:#65737e;">#创建子类</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the Male class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">pass</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Female</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the Female class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">pass</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Male</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)  </span><span style="color:#65737e;">#实例化通过子类来实现，子类会继承父类的数据和方法</span><span style="color:#65737e;">
</span><span>Xiaohong=</span><span style="color:#bf616a;">Female</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.gender)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaohong.</span><span style="color:#bf616a;">printage</span><span>())</span><span>
</span></code></pre>
<p>继承判断函数：</p>
<p>isinstance()</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#96b5b4;">isinstance</span><span>()</span><span>
</span><span style="color:#96b5b4;">issubclass</span><span>()</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#96b5b4;">isinstance</span><span>(Xiaohong,Female))</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#96b5b4;">isinstance</span><span>(Xiaohong,Male))</span><span>
</span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#96b5b4;">issubclass</span><span>(Female,Person))</span><span>
</span></code></pre>
<p>方法定制：</p>
<p>类中继承方法的搜索规则：实例—子类—父类</p>
<p>子类除了继承父类的属性，还可以自己添加、定制、拓展更多功能。</p>
<p>若子类的属性和父类的属性名字相同，则以子类属性为主，即子类将父类的方法重写或扩展</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Male</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):  </span><span style="color:#65737e;">#创建子类</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the Male class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">He is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Female</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the Female class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">She is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Male</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)  </span><span style="color:#65737e;">#实例化通过子类来实现，子类会继承父类的数据和方法</span><span style="color:#65737e;">
</span><span>Xiaohong=</span><span style="color:#bf616a;">Female</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaohong.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span></code></pre>
<p>定制构造函数：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Male</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):  </span><span style="color:#65737e;">#创建子类</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the Male class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>): </span><span style="color:#65737e;">#给子类设置构造函数</span><span style="color:#65737e;">
</span><span>        Person.</span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,name,age,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;) </span><span style="color:#65737e;">#子类调用父类的构造函数，并进行修改。在这里直接将父类的gender设置为‘male’</span><span style="color:#65737e;">
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">He is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Female</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the Female class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>): </span><span>
</span><span>        Person.</span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,name,age,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;) </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">She is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Male</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>)  </span><span style="color:#65737e;">#实例化的时候，就不需要再次传入性别参数</span><span style="color:#65737e;">
</span><span>Xiaohong=</span><span style="color:#bf616a;">Female</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaohong.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span></code></pre>
<p>多重继承：</p>
<p>多重继承用于实现子类对多个父类的继承</p>
<p>通过多重继承，可以混合不同类的功能，实现更加复杂的要求</p>
<p>人(超类)</p>
<p>男（子类）女（子类）胖（子类）瘦（子类）</p>
<p>男胖 男瘦 女胖 女瘦</p>
<p>男胖小明（实例） 女瘦小红（实例）</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Male</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):  </span><span style="color:#65737e;">#创建子类</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the Male class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>): </span><span style="color:#65737e;">#给子类设置构造函数</span><span style="color:#65737e;">
</span><span>        Person.</span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,name,age,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;) </span><span style="color:#65737e;">#子类调用父类的构造函数，并进行修改。在这里直接将父类的gender设置为‘male’</span><span style="color:#65737e;">
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">He is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Female</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the Female class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>): </span><span>
</span><span>        Person.</span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,name,age,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;) </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">She is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Fat</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the fat class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printweight</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">fat</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Thin</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the thin class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printweight</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">thin</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">MaleFat</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Male</span><span style="color:#eff1f5;">,</span><span style="color:#a3be8c;">Fat</span><span style="color:#eff1f5;">): </span><span style="color:#65737e;">#多重继承</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">pass</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">FemaleThin</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Female</span><span style="color:#eff1f5;">,</span><span style="color:#a3be8c;">Thin</span><span style="color:#eff1f5;">): </span><span style="color:#65737e;">#多重继承</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">pass</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">MaleFat</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>)  </span><span style="color:#65737e;">#实例化的时候，就不需要再次传入性别参数</span><span style="color:#65737e;">
</span><span>Xiaohong=</span><span style="color:#bf616a;">FemaleThin</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>)</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.</span><span style="color:#bf616a;">printweight</span><span>())</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaohong.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaohong.</span><span style="color:#bf616a;">printweight</span><span>())</span><span>
</span></code></pre>
<p>类的多态：</p>
<p>多态是面向对象语言的基本特征，多态意味着变量并不知道引用的对象是什么，根据引用对象的不同表现不同的行为方式</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>choice</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Male</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):  </span><span style="color:#65737e;">#创建子类</span><span style="color:#65737e;">
</span><span>    &#39;</span><span style="color:#a3be8c;">the Male class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>): </span><span style="color:#65737e;">#给子类设置构造函数</span><span style="color:#65737e;">
</span><span>        Person.</span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,name,age,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;) </span><span style="color:#65737e;">#子类调用父类的构造函数，并进行修改。在这里直接将父类的gender设置为‘male’</span><span style="color:#65737e;">
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">He is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Female</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Person</span><span style="color:#eff1f5;">):</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the Female class</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>): </span><span>
</span><span>        Person.</span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,name,age,&#39;</span><span style="color:#a3be8c;">female</span><span>&#39;) </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">She is </span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.gender)</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Male</span><span>(&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>)  </span><span style="color:#65737e;">#实例化的时候，就不需要再次传入性别参数</span><span style="color:#65737e;">
</span><span>Xiaohong=</span><span style="color:#bf616a;">Female</span><span>(&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;,</span><span style="color:#d08770;">9</span><span>)</span><span>
</span><span>
</span><span>obj=</span><span style="color:#bf616a;">choice</span><span>([Xiaoming ,Xiaohong])</span><span>
</span><span style="color:#96b5b4;">print</span><span>(obj.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span></code></pre>
<p>类的私有变量</p>
<p>默认情况下，类的内部所定义的变量我们是通过点号来访问并修改的，这种变量称为公有变量，公有变量可以被用户修改，导致类的内部状态不一致，此时需要设置私有变量</p>
<p>通过私有变量限制访问</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>choice</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#65737e;">#这些变量是私有变量</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.name,</span><span style="color:#bf616a;">self</span><span>.gender))</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">Xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)</span><span>
</span><span style="color:#65737e;"># print(Xiaoming.age)</span><span style="color:#65737e;">
</span><span>
</span><span style="color:#65737e;">#可以访问私有属性，但是不建议这么做</span><span style="color:#65737e;">
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming._Person__age)  </span><span style="color:#65737e;">#通过点号加入类名可以访问</span><span style="color:#65737e;">
</span><span>
</span><span style="color:#65737e;"># Xiaoming.age=20</span><span style="color:#65737e;">
</span><span style="color:#65737e;"># print(Xiaoming.age)</span><span style="color:#65737e;">
</span></code></pre>
<p>通过设置函数来设置变量</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>choice</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">the person class</span><span>&#39;</span><span>
</span><span>    version=</span><span style="color:#d08770;">1.0  </span><span style="color:#65737e;">#数据属性</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#65737e;">#这些变量是私有变量</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__gender=gender</span><span>
</span><span>    </span><span>
</span><span>    </span><span style="color:#65737e;">#两个set函数是设置函数</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_gender</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">gender</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__gender=gender</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_age</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">age</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__age=age</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printage</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.__name,</span><span style="color:#bf616a;">self</span><span>.__age))</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">printgender</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%s</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.__name,</span><span style="color:#bf616a;">self</span><span>.__gender))</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">Xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.</span><span style="color:#bf616a;">printgender</span><span>())</span><span>
</span><span>
</span><span>Xiaoming.</span><span style="color:#bf616a;">set_age</span><span>(</span><span style="color:#d08770;">20</span><span>)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.</span><span style="color:#bf616a;">printage</span><span>())</span><span>
</span></code></pre>
<p>装饰器</p>
<p>在变量私有变量中，我们通过获取和设置函数，可以实现更安全的访问，但是在进行访问和设置的时候，比较麻烦，那就可以通过装饰器来实现</p>
<p>装饰器既能检测参数，又能像属性一样方便的访问和修改类的变量</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Person</span><span style="color:#eff1f5;">:</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">name</span><span>,</span><span style="color:#bf616a;">age</span><span>,</span><span style="color:#bf616a;">gender</span><span>): </span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__name=name</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__age=age</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__gender=gender</span><span>
</span><span>    </span><span>
</span><span>    @</span><span style="color:#96b5b4;">property </span><span style="color:#65737e;">#加入@property装饰器，表示这是一个获取函数，实现函数只读</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">age</span><span>(</span><span style="color:#bf616a;">self</span><span>): </span><span style="color:#65737e;">#这是一个获取函数，主要功能就是获取变量</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.__age</span><span>
</span><span>
</span><span>    @age.</span><span style="color:#bf616a;">setter  </span><span style="color:#65737e;">#@property+@.setter实现函数的可读写功能。设置函数主要功能是实现变量有条件的赋值</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">age</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">value</span><span>):</span><span>
</span><span>        </span><span style="color:#b48ead;">if </span><span>value&lt;</span><span style="color:#d08770;">0 </span><span>or value&gt;</span><span style="color:#d08770;">100</span><span>:</span><span>
</span><span>            </span><span style="color:#b48ead;">raise </span><span style="color:#bf616a;">ValueError</span><span>(&#39;</span><span style="color:#a3be8c;">Invalid age!</span><span>&#39;) </span><span style="color:#65737e;">#通过raise语句触发异常</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__age=value</span><span>
</span><span>
</span><span>Xiaoming=</span><span style="color:#bf616a;">Person</span><span>(&#39;</span><span style="color:#a3be8c;">Xiaoming</span><span>&#39;,</span><span style="color:#d08770;">10</span><span>,&#39;</span><span style="color:#a3be8c;">male</span><span>&#39;)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.age)</span><span>
</span><span>Xiaoming.age=</span><span style="color:#d08770;">80</span><span>
</span><span style="color:#96b5b4;">print</span><span>(Xiaoming.age)</span><span>
</span></code></pre>
<p>通过类定义一个数字时钟</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>time</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Clock</span><span style="color:#eff1f5;">():</span><span>
</span><span>    </span><span style="color:#65737e;">&#39;&#39;&#39;这是一个数字时钟&#39;&#39;&#39;</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">hours</span><span>=</span><span style="color:#d08770;">0</span><span>,</span><span style="color:#bf616a;">minute</span><span>=</span><span style="color:#d08770;">0</span><span>,</span><span style="color:#bf616a;">second</span><span>=</span><span style="color:#d08770;">0</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__hours=hours</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__minute=minute</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__second=second</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#65737e;">&#39;&#39;&#39;设置时钟走字&#39;&#39;&#39;</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__second+=</span><span style="color:#d08770;">1</span><span>
</span><span>        </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.__second==</span><span style="color:#d08770;">60</span><span>:</span><span>
</span><span>            </span><span style="color:#bf616a;">self</span><span>.__second=</span><span style="color:#d08770;">0</span><span>
</span><span>            </span><span style="color:#bf616a;">self</span><span>.__minute+=</span><span style="color:#d08770;">1</span><span>
</span><span>            </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.__minute==</span><span style="color:#d08770;">60</span><span>:</span><span>
</span><span>                </span><span style="color:#bf616a;">self</span><span>.__minute=</span><span style="color:#d08770;">0</span><span>
</span><span>                </span><span style="color:#bf616a;">self</span><span>.__hours+=</span><span style="color:#d08770;">1</span><span>
</span><span>                </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.__hours==</span><span style="color:#d08770;">24</span><span>:</span><span>
</span><span>                    </span><span style="color:#bf616a;">self</span><span>.__hours=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#65737e;">&#39;&#39;&#39;用来显示时间&#39;&#39;&#39;</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span>&#39;</span><span style="color:#d08770;">%2d</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%2d</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">%2d</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.__hours,</span><span style="color:#bf616a;">self</span><span>.__minute,</span><span style="color:#bf616a;">self</span><span>.__second)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    clock=</span><span style="color:#bf616a;">Clock</span><span>(</span><span style="color:#d08770;">23</span><span>,</span><span style="color:#d08770;">59</span><span>,</span><span style="color:#d08770;">58</span><span>)</span><span>
</span><span>    </span><span style="color:#b48ead;">while </span><span style="color:#d08770;">True</span><span>:</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(clock.</span><span style="color:#bf616a;">show</span><span>())</span><span>
</span><span>        time.</span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">1</span><span>)</span><span>
</span><span>        clock.</span><span style="color:#bf616a;">run</span><span>()</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>
<p>Python输入输出</p>
<p>什么是输入输出？</p>
<p>内存—硬盘</p>
<p>CPU-内存</p>
<p>键盘-屏幕</p>
<p>屏幕输出print</p>
<p>用于打印（输出）信息到屏幕</p>
<p>键盘输入input</p>
<p>用于接收键盘输入，输入内容可以是表达式</p>
<p>s=input('请输入你的公式：')</p>
<p>print('结果是：',eval(s))</p>
<p>文件处理</p>
<p>文件打开</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>file_object=</span><span style="color:#96b5b4;">open</span><span>(file_name,access_mode,buffering)</span><span>
</span></code></pre>
<p>文件分类</p>
<p>文本文件：可以被我们阅读和理解，使用文本编辑器来修改，html doc xls ppt txt 体积更多</p>
<p>二进制文件：程序能阅读和理解的，需要专门的文件编辑器来打开 jpg gif mp4 mkv 体积小</p>
<p>文件名称</p>
<p>file_name是包含要打开的文件名字的字符串，可以是相对路径也可以是绝对路径</p>
<p>access_mode 打开模式</p>
<p>r 只读方式打开，默认打开方式，指针放在文件开头</p>
<p>rb 二进制只读方式</p>
<p>r+ 读写方式 指针放在文件开头</p>
<p>rb+</p>
<p>w 写入方式打开。如果文件不存在，则新建；如果文件存在，从头编辑，原来内容被删除</p>
<p>wb</p>
<p>w+ 读写</p>
<p>wb+</p>
<p>a 打开一个文件用于追加内容，指针在文件结尾。如果文件不存在，则创建新文件</p>
<p>ab</p>
<p>a+</p>
<p>ab+</p>
<p>缓存大小</p>
<p>如果buffering值被设置为0，就不会有缓存</p>
<p>如果buffering值被设置为1，访问文件的时候会进行缓存</p>
<p>如果buffering值被设置为大于1的值，表明是缓存区的大小</p>
<p>如果设置为负值，缓存区大小为系统默认</p>
<p>文件打开</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">w</span><span>&#39;)</span><span>
</span></code></pre>
<p>文件关闭</p>
<p>结束文件调用，节省内存空间</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">w</span><span>&#39;)</span><span>
</span><span>
</span><span>file1.</span><span style="color:#bf616a;">write</span><span>(&#39;</span><span style="color:#a3be8c;">welcome to pinginglab</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">www.pinginglab.net</span><span style="color:#96b5b4;">\n</span><span>&#39;)</span><span>
</span><span>
</span><span>file1.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span></code></pre>
<p>文件读取</p>
<p>file.read() 读取文件所有字节，可以指定字节数，不指定或者为负则读取所有</p>
<p>file.readline() 读取一行，包括\n符</p>
<p>file.readlines() 读取所有行并返回列表，每行返回列表</p>
<p>如果以a打开文件，则读取不到内容，因为指针在文件末尾</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;)</span><span>
</span><span>a=file1.</span><span style="color:#bf616a;">read</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span><span>file1.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>
</span><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;)</span><span>
</span><span>a=file1.</span><span style="color:#bf616a;">read</span><span>(</span><span style="color:#d08770;">5</span><span>)</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span><span>file1.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>
</span><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;)</span><span>
</span><span>a=file1.</span><span style="color:#bf616a;">readline</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span><span>file1.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span></code></pre>
<p>文件增加</p>
<p>通过a方式打开文件，就可以在原有内容上增加</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">a</span><span>&#39;)</span><span>
</span><span>file1.</span><span style="color:#bf616a;">write</span><span>(&#39;</span><span style="color:#a3be8c;">123456</span><span style="color:#96b5b4;">\n</span><span>&#39;)</span><span>
</span><span>file1.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span></code></pre>
<p>文件偏移</p>
<p>file.tell() 表示当前指针所在的位置</p>
<p>file.seek() 指定指针偏移的位置</p>
<p>file.seek(offset,whence=0)</p>
<p>Offset代表偏移量，whence 0代表起始位置，1代表当前位置，2代表文件末尾</p>
<p>读取当前文件指针位置</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r+</span><span>&#39;)</span><span>
</span><span>a=file1.</span><span style="color:#bf616a;">tell</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span></code></pre>
<p>指针从起始位置偏移10</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">newfile.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r+</span><span>&#39;)</span><span>
</span><span>file1.</span><span style="color:#bf616a;">seek</span><span>(</span><span style="color:#d08770;">10</span><span>,</span><span style="color:#d08770;">0</span><span>)</span><span>
</span><span>a=file1.</span><span style="color:#bf616a;">tell</span><span>()</span><span>
</span><span style="color:#96b5b4;">print</span><span>(a)</span><span>
</span></code></pre>
<p>文件重命名</p>
<p>导入系统模块</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>os</span><span>
</span><span>os.</span><span style="color:#bf616a;">rename</span><span>(‘oldfilename’,’newfilename’)</span><span>
</span></code></pre>
<p>文件删除</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.remove</span><span>
</span></code></pre>
<p>目录处理：</p>
<p>os模块</p>
<p>获取目录</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.</span><span style="color:#bf616a;">getcwd</span><span>()</span><span>
</span></code></pre>
<p>创建目录</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.</span><span style="color:#bf616a;">mkdir</span><span>(‘newdir’)</span><span>
</span></code></pre>
<p>删除目录</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.</span><span style="color:#bf616a;">rmdir</span><span>()</span><span>
</span></code></pre>
<p>查看目录内容</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.</span><span style="color:#bf616a;">listdir</span><span>()</span><span>
</span></code></pre>
<p>os.path模块：</p>
<p>查询文件</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.path.</span><span style="color:#bf616a;">isfile</span><span>()</span><span>
</span></code></pre>
<p>查询目录</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.path.</span><span style="color:#bf616a;">isdir</span><span>()</span><span>
</span></code></pre>
<p>查看大小</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>os.path.</span><span style="color:#bf616a;">getsize</span><span>()</span><span>
</span></code></pre>
<p>序列化</p>
<p>我们用Python对象所进行的操作都是在内存中，若Python程序关闭，则内存被清空。。</p>
<p>为了将我们所操作的内容永久存储，就需要序列化</p>
<p>序列化就是将复杂的数据结构（对象）转换为一个二进制集合（数据流）,这样就可以把数据永久存储或通过网络发送，然后再重新把数据流恢复到原来的对象内容</p>
<p>变量/对象从内存中变成可存储或者传输的过程称之为序列化</p>
<p>常见的序列化方法：pickling 、serialization、marshaling、flattening</p>
<p>pickling</p>
<p>提供了Python对象的序列化和存储转换功能</p>
<p>函数</p>
<p>pickling.dump()</p>
<p>接收一个文件或一个数据对象，以特定格式保存到给定文件中</p>
<p>pickling.load()</p>
<p>从文件中取出已保存的对象时，pickle知道如何恢复这些对象到它们原来的格式</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>pickle</span><span>
</span><span>
</span><span>a=</span><span style="color:#d08770;">1</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(pickle.</span><span style="color:#bf616a;">dump</span><span>(a)) </span><span style="color:#65737e;">#将对象序列化</span><span style="color:#65737e;">
</span><span>
</span><span>b=&#39;</span><span style="color:#a3be8c;">hello,world</span><span>&#39;</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(pickle.</span><span style="color:#bf616a;">dump</span><span>(b) )</span><span>
</span></code></pre>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>pickle</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span>b=&#39;</span><span style="color:#a3be8c;">hello,world</span><span>&#39;</span><span>
</span><span>
</span><span>f=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">dump.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">wb</span><span>&#39;)</span><span>
</span><span>
</span><span>pickle.</span><span style="color:#bf616a;">dump</span><span>(b,f)</span><span>
</span><span>
</span><span>f.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span></code></pre>
<p>把中文做序列化</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>pickle</span><span>
</span><span>
</span><span> </span><span>
</span><span>
</span><span>b=&#39;</span><span style="color:#a3be8c;">你好，世界</span><span>&#39;</span><span>
</span><span>
</span><span>f=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">dump.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">wb+</span><span>&#39;)</span><span>
</span><span>
</span><span>pickle.</span><span style="color:#bf616a;">dump</span><span>(b,f)</span><span>
</span><span>
</span><span>f.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span></code></pre>
<p>反序列化(显示回原来的文本)</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>f=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">dump.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">rb+</span><span>&#39;)</span><span>
</span><span>
</span><span>d=pickle.</span><span style="color:#bf616a;">load</span><span>(f,</span><span style="color:#bf616a;">encoding</span><span>=’utf-</span><span style="color:#d08770;">8</span><span>’)</span><span>
</span><span>
</span><span>f.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>
</span><span style="color:#96b5b4;">print</span><span>(d)</span><span>
</span></code></pre>
<p>读写文本文件</p>
<p>使用for-in循环逐行读取或者使用readlines将文件按行读取</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>
</span><span style="color:#65737e;">#一次性读取整个文件内容</span><span style="color:#65737e;">
</span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">致橡树.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;,</span><span style="color:#bf616a;">encoding</span><span>=&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>	</span><span style="color:#96b5b4;">print</span><span>(f.</span><span style="color:#bf616a;">read</span><span>())</span><span>
</span><span>    </span><span>
</span><span style="color:#65737e;">#通过for-in循环逐行读取</span><span style="color:#65737e;">
</span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">致橡树.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;,</span><span style="color:#bf616a;">encoding</span><span>=&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>	</span><span style="color:#b48ead;">for </span><span>line </span><span style="color:#b48ead;">in </span><span>f:</span><span>
</span><span>		</span><span style="color:#96b5b4;">print</span><span>(line,</span><span style="color:#bf616a;">end</span><span>=&#39;&#39;)</span><span>
</span><span>        </span><span>
</span><span style="color:#65737e;">#按行读取文件到列表中</span><span style="color:#65737e;">
</span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">致橡树.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;,</span><span style="color:#bf616a;">encoding</span><span>=&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>	lines=f.</span><span style="color:#bf616a;">readlines</span><span>()</span><span>
</span><span>	</span><span style="color:#96b5b4;">print</span><span>(lines)</span><span>
</span><span>
</span></code></pre>
<p>读写二进制文件</p>
<p>实现复制拖文件的功能</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>	</span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">/Users/numb/Documents/vscode project/timg.jpeg</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">rb</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>fs1:</span><span>
</span><span>		data=fs1.</span><span style="color:#bf616a;">read</span><span>()</span><span>
</span><span>		</span><span style="color:#96b5b4;">print</span><span>(data)</span><span>
</span><span>	</span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">/Users/numb/Documents/vscode project/gmit.jpeg</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">wb</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>fs2:</span><span>
</span><span>		fs2.</span><span style="color:#bf616a;">write</span><span>(data) </span><span>
</span><span>  		</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">程序执行结束</span><span>&#39;)</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>	</span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>
<p>注意：文件的路径</p>
<p>读写JSON文件</p>
<p>JSON是纯文本（任何系统任何编程语言都可以处理纯文本）</p>
<p>JSON可以作为异构系统之间交换数据的标准</p>
<p><img src="images/Python/clip_image002-1598008411690.png" alt="img" /></p>
<p>我们使用Python中的json模块就可以将字典或列表以json格式保存到文件中</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>json</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    mydict={</span><span>
</span><span>        &#39;</span><span style="color:#a3be8c;">name</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">拼客学院</span><span>&#39;,</span><span>
</span><span>        &#39;</span><span style="color:#a3be8c;">age</span><span>&#39;:</span><span style="color:#d08770;">10</span><span>,</span><span>
</span><span>        &#39;</span><span style="color:#a3be8c;">qq</span><span>&#39;:</span><span style="color:#d08770;">123456789</span><span>,</span><span>
</span><span>        &#39;</span><span style="color:#a3be8c;">chengyuan</span><span>&#39;:[&#39;</span><span style="color:#a3be8c;">xiaoming</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">xiaohong</span><span>&#39;],</span><span>
</span><span>        &#39;</span><span style="color:#a3be8c;">kecheng</span><span>&#39;:[</span><span>
</span><span>            {&#39;</span><span style="color:#a3be8c;">fenlei</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">shentouceshi</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">tedian</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">heike</span><span>&#39;},</span><span>
</span><span>            {&#39;</span><span style="color:#a3be8c;">fenlei</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">xitongyunwei</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">tedian</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">yunwei</span><span>&#39;}</span><span>
</span><span>        ]</span><span>
</span><span>    }</span><span>
</span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">data.json</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">w</span><span>&#39;,</span><span style="color:#bf616a;">encoding</span><span>=&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>	json.</span><span style="color:#bf616a;">dump</span><span>(mydict,f)</span><span>
</span><span>	</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">数据保存完成！</span><span>&#39;)</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>	</span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>
<p>JSON模块中四个比较重要的函数:</p>
<p>dump-将python对象按照json格式序列化到文件中</p>
<p>dumps-将python对象处理成json格式的字符串</p>
<p>load-将文件中的json数据反序列化成对象</p>
<p>loads-将字符串的内容反序列化成Python对象</p>
<p>目前绝大多数网络数据服务（网络API）都是基于http协议提供json格式的数据</p>
<p>下面这个例子通过requests模块访问网络API获取国内新闻
天行数据</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>requests</span><span>
</span><span style="color:#b48ead;">import </span><span>json </span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>	resp=requests.</span><span style="color:#bf616a;">get</span><span>(&#39;</span><span style="color:#a3be8c;">http://api.tianapi.com/guonei/index?key= xx &amp;num=10</span><span>&#39;)</span><span>
</span><span>	data_model=json.</span><span style="color:#bf616a;">loads</span><span>(resp.text)</span><span>
</span><span>	</span><span style="color:#b48ead;">for </span><span>news </span><span style="color:#b48ead;">in </span><span>data_model[&#39;</span><span style="color:#a3be8c;">newslist</span><span>&#39;]:</span><span>
</span><span>		</span><span style="color:#96b5b4;">print</span><span>(news[&#39;</span><span style="color:#a3be8c;">title</span><span>&#39;])</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>
<p>JSON序列化优势</p>
<p>如果我们要在不同的编程语言之间传递对象，就必须把对象序列化为标准格式，比如XML</p>
<p>但更好的方法是序列化为JSON，因为JSON表示出来就是一个字符串，可以被所有语言读取，也可以方便的存储到磁盘或者通过网络传输</p>
<p>JSON不仅是标准格式，并且XML更快，而且可以直接在web页面读取，非常方便</p>
<p>很多HTTP接口都采用json来传输数据</p>
<p>Python的异常处理</p>
<p>什么是异常？</p>
<p>程序在运行过程中会出现各种各样的问题，例如语法编写错误或者文件读写错误等。</p>
<p>默认情况下，出现错误的时候程序后马上停止执行，并根据错误情况反馈异常，这样就可以方便程序员进行排错和调试。</p>
<p>本质上讲，异常是一种类，并且有很多子类，基类为BaseException</p>
<p>常见的异常类型</p>
<p>IOError/FileNotFoundError</p>
<p>输入输出异常/文件未找到异常</p>
<p>Python2中是IO，Python3中是FileNotFound</p>
<p>异常代码：file1=open('filetest.txt','r')</p>
<p>ZeroDivisionError：分母为零的异常</p>
<p>异常代码：  a=1</p>
<p>​					 b=0</p>
<p>​					 print(a/b)</p>
<p>TypeError：类型错误，操作对本类型无效</p>
<p>异常代码：a=1</p>
<p>​                   b='hello'</p>
<p>​                   print(a+b)</p>
<p>ValueError：值异常，或者叫参数异常</p>
<p>异常代码：num=int('a')</p>
<p>​                   print(num)</p>
<p>SyntexError：语法错误</p>
<p>异常代码：a=1+</p>
<p>NameError：名字异常，对象未定义</p>
<p>异常代码：a=1</p>
<p>​                   print(a+b)</p>
<p>ArributeError：属性异常，对象没有此属性或者方法</p>
<p>异常代码：a='hello'</p>
<p>​                   b=a.coun()</p>
<p>​                   print(b)</p>
<p>异常处理</p>
<p>异常错误会导致程序终止运行，我们可以对异常进行捕获，进行进一步操作</p>
<p>异常处理分为异常捕获，异常清理，异常触发</p>
<p>功能：可以提高程序的健壮性，实现程序的友好度，实现程序的功能调试</p>
<p>异常捕获</p>
<p>try…except…</p>
<p>功能：执行try语句，若没有异常，则正常执行，忽略except代码块；若出现异常，跳过try语句，执行except代码块</p>
<p>捕获一个异常</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    a=</span><span style="color:#d08770;">1</span><span>
</span><span>    b=&#39;</span><span style="color:#a3be8c;">hello</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(a+b)</span><span>
</span><span style="color:#b48ead;">except </span><span>TypeError:</span><span>
</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">invalid type,please try again</span><span>&#39;)</span><span>
</span></code></pre>
<p>捕获多个异常，同一个处理结果</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    s=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">how old are you：</span><span>&#39;))</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(s)</span><span>
</span><span>    a=&#39;</span><span style="color:#a3be8c;">hello</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(a+s)   </span><span style="color:#65737e;">#代码逻辑有问题，仅用于触发异常</span><span style="color:#65737e;">
</span><span>
</span><span style="color:#b48ead;">except </span><span>(TypeError,ValueError):</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">enter an integer value,please try again!</span><span>&#39;)</span><span>
</span></code></pre>
<p>捕获多个异常，不同的处理结果</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    s=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">how old are you：</span><span>&#39;))</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(s)</span><span>
</span><span>    a=&#39;</span><span style="color:#a3be8c;">hello</span><span>&#39;</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(a+s)</span><span>
</span><span>
</span><span style="color:#b48ead;">except </span><span>TypeError:</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">enter an integer value</span><span>&#39;)</span><span>
</span><span style="color:#b48ead;">except </span><span>ValueError:</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">please try again!</span><span>&#39;)</span><span>
</span></code></pre>
<p>捕获所有异常</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    s=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">how old are you：</span><span>&#39;))</span><span>
</span><span>    </span><span style="color:#65737e;"># print(s)</span><span style="color:#65737e;">
</span><span>    a=</span><span style="color:#d08770;">10</span><span>
</span><span>    </span><span style="color:#65737e;"># print(a+s)</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(a/s)</span><span>
</span><span>
</span><span style="color:#b48ead;">except</span><span>:  </span><span style="color:#65737e;">#捕获所有异常，except这里不需要写特定类型异常即可</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">enter an integer value</span><span>&#39;)</span><span>
</span></code></pre>
<p>正常情况下，只执行一次try语句，当出现异常的时候，重复执行代码块：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_age</span><span>():</span><span>
</span><span>    </span><span style="color:#b48ead;">while </span><span style="color:#d08770;">True</span><span>:</span><span>
</span><span>        </span><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>            n=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">How old are you:</span><span>&#39;))</span><span>
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span><span>            </span><span style="color:#b48ead;">break</span><span>
</span><span>        </span><span style="color:#b48ead;">except</span><span>:</span><span>
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">please try again!</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">get_age</span><span>()</span><span>
</span></code></pre>
<p>下面这个代码无论是否出现异常，都会重复执行：</p>
<p>捕获异常，与else语句结合</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    a=</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#96b5b4;">input</span><span>(&#39;</span><span style="color:#a3be8c;">请输入一个整数：</span><span>&#39;))</span><span>
</span><span>    b=</span><span style="color:#d08770;">2</span><span>
</span><span>    c=a+b</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(c)</span><span>
</span><span style="color:#b48ead;">except </span><span>TypeError:</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">please try again</span><span>&#39;)</span><span>
</span><span style="color:#b48ead;">else</span><span>: </span><span style="color:#65737e;">#若没有异常，则执行else语句</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(b)</span><span>
</span></code></pre>
<p>异常清理</p>
<p>try…finally：用于实现异常清理，不管最终try语句有没有异常，都必须执行finally语句</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">filetest.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">w+</span><span>&#39;)</span><span>
</span><span>    file1.</span><span style="color:#bf616a;">read</span><span>()</span><span>
</span><span style="color:#b48ead;">finally</span><span>:</span><span>
</span><span>    file1.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">IOerror,the file is closed</span><span>&#39;)</span><span>
</span></code></pre>
<p>打开方式如果选择r，因为文件不存在，所以file1赋值不成功则会提示NameError，改为w+，会在本地创建文件，然后打开并读取文件的时候不会发现异常</p>
<p>try…except和try…finally是有区别的</p>
<p>try…finally是先执行try，完了之后再执行finally。file1因为文件不存在所以赋值失败，finally在调用file1这个变量的时候就会报NameError。</p>
<p>try…except是分开执行的，不存在except里面调用try的变量。如果文件不存在就报FileNotFoundError错误。</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">test111.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>        read_data = f.</span><span style="color:#bf616a;">read</span><span>()</span><span>
</span><span style="color:#b48ead;">finally</span><span>:</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">IOerror,the file is closed</span><span>&#39;)</span><span>
</span></code></pre>
<p>try..except…finally</p>
<p>try…except…else…finally</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    file1=</span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">filetest.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">w+</span><span>&#39;)</span><span>
</span><span>    file1.</span><span style="color:#bf616a;">read</span><span>()</span><span>
</span><span>
</span><span style="color:#b48ead;">except </span><span>FileNotFoundError:</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">please try again</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">else</span><span>:</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">good</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">finally</span><span>:</span><span>
</span><span>    file1.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">close the file</span><span>&#39;)</span><span>
</span></code></pre>
<p>with…as…  ：with类似finally，用于实现程序不管是否异常都能执行as的代码</p>
<p>with 表达式 as 变量：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">filetest.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">r</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>	f.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span></code></pre>
<p>异常触发</p>
<p>raise用于抛出异常，异常可以自己定义</p>
<p>raise 异常的类型 traceback</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">my_number</span><span>(</span><span style="color:#bf616a;">n</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">if </span><span>n&gt;</span><span style="color:#d08770;">0</span><span>:</span><span>
</span><span>        </span><span style="color:#b48ead;">raise </span><span style="color:#bf616a;">NameError</span><span>(&#39;</span><span style="color:#a3be8c;">invalid number!n&lt;=0</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span><span>
</span><span style="color:#bf616a;">my_number</span><span>(</span><span style="color:#d08770;">1</span><span>)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">my_number</span><span>(</span><span style="color:#bf616a;">n</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">if </span><span>n&gt;</span><span style="color:#d08770;">0</span><span>:</span><span>
</span><span>        </span><span style="color:#b48ead;">raise </span><span style="color:#bf616a;">ValueError</span><span>(&#39;</span><span style="color:#a3be8c;">invalid number!n&lt;=0</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(n)</span><span>
</span><span>
</span><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    </span><span style="color:#bf616a;">my_number</span><span>(</span><span style="color:#d08770;">1</span><span>)</span><span>
</span><span style="color:#b48ead;">except </span><span>ValueError:</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">please enter again</span><span>&#39;)</span><span>
</span></code></pre>
<p>assert</p>
<p>有条件的触发异常，如果不满足则抛出AssertionError异常，相比raise，多了条件判断。但不用像raise一样抛出各种异常类型</p>
<p>语法：assert 条件判断,’traceback’</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">assert </span><span style="color:#d08770;">1</span><span>==</span><span style="color:#d08770;">2</span><span>,&#39;</span><span style="color:#a3be8c;">one does not equal two</span><span>&#39;</span><span>
</span><span>
</span><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>    </span><span style="color:#b48ead;">assert </span><span style="color:#d08770;">1</span><span>==</span><span style="color:#d08770;">2</span><span>,&#39;</span><span style="color:#a3be8c;">one does not equal two</span><span>&#39;</span><span>
</span><span style="color:#b48ead;">except </span><span>AssertionError:</span><span>
</span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">please try again</span><span>&#39;)</span><span>
</span></code></pre>
<p>自定义异常类型</p>
<p>Python中自定义自己的异常类型非常简单，只需要从exception类继承即可</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">SomeCustomException</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Exception</span><span style="color:#eff1f5;">):</span><span>
</span><span>	</span><span style="color:#b48ead;">pass</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">AnotherException</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">SomeCustomException</span><span style="color:#eff1f5;">):</span><span>
</span><span>	</span><span style="color:#b48ead;">pass</span><span>
</span></code></pre>
<p>如果内置的异常已经包括了所需要的异常，直接考虑使用内置异常即可。如果内置异常不能满足当前需求，则再考虑自定义异常类型。</p>
<p>Python的进程和线程</p>
<p>目前的计算机已经是多CPU多核时代，我们使用的操作系统也都是支持多任务操作的，这样我们就可以同时运行多个程序，也可以将一个程序分解为若干个相对独立的子任务，让多个子任务并发执行，可以缩短程序的执行时间。</p>
<p>进程</p>
<p>进程就是操作系统中执行的程序，操作系统是以进程为单位分配存储空间。</p>
<p>一个进程还可以拥有多个并发的执行线索，简单的说就是拥有多个可以获得CPU调度的执行单元，这就是所谓的线程。线程在同一个进程下，它们可以共享相同的上下文，相对于进程来说，线程间的信息共享和通信就更加容易</p>
<p>Python即支持多进程也支持多线程，因此使用Python实现并发编程主要有三种方式：多进程、多线程、多进程+多线程</p>
<p>Python中的多进程</p>
<p>Linux操作系统中提供fork()来创建进程，调用fork函数的是父进程，创建出来的是子进程，子进程是父进程的拷贝，但是子进程是有自己的PID，在Python中os模块提供了fork函数。由于Windows系统没有fork调用，因此要实现跨平台的多进程编程，可以使用‘multiprocessing’模块的’process’来创建子进程。</p>
<p>下面这个例子是通过单线程来进行文件下载：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>randint</span><span>
</span><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time,sleep</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">download_task</span><span>(</span><span style="color:#bf616a;">filename</span><span>):</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">开始下载</span><span style="color:#d08770;">%s</span><span>&#39;%filename)</span><span>
</span><span>    time_to_download=</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">10</span><span>)</span><span>
</span><span>    </span><span style="color:#bf616a;">sleep</span><span>(time_to_download)</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">下载完成！耗费了</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">秒</span><span>&#39;%(filename,time_to_download))</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    start=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#bf616a;">download_task</span><span>(&#39;</span><span style="color:#a3be8c;">Python学习手册.pdf</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#bf616a;">download_task</span><span>(&#39;</span><span style="color:#a3be8c;">HTML学习教程.mp4</span><span>&#39;)</span><span>
</span><span>    end=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">总共耗费了</span><span style="color:#d08770;">%.2f</span><span style="color:#a3be8c;">秒</span><span>&#39;%(end-start))</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p><img src="images/Python/image-20200825010008066.png" alt="image-20200825010008066" /></p>
<p>下面这个例子是采用多进程同时下载文件，可以节省下载时间：</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>randint</span><span>
</span><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time,sleep</span><span>
</span><span style="color:#b48ead;">from </span><span>multiprocessing </span><span style="color:#b48ead;">import </span><span>Process </span><span style="color:#65737e;">#Process是一个类</span><span style="color:#65737e;">
</span><span style="color:#b48ead;">from </span><span>os </span><span style="color:#b48ead;">import </span><span>getpid</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">download_task</span><span>(</span><span style="color:#bf616a;">filename</span><span>):</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">启动下载进程，进程号[</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">].</span><span>&#39;%</span><span style="color:#bf616a;">getpid</span><span>())</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">开始下载</span><span style="color:#d08770;">%s</span><span>&#39;%filename)</span><span>
</span><span>    time_to_download=</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">10</span><span>)</span><span>
</span><span>    </span><span style="color:#bf616a;">sleep</span><span>(time_to_download)</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">下载完成！耗费了</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">秒</span><span>&#39;%(filename,time_to_download))</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    start=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    p1=</span><span style="color:#bf616a;">Process</span><span>(</span><span style="color:#bf616a;">target</span><span>=download_task,</span><span style="color:#bf616a;">args</span><span>=(&#39;</span><span style="color:#a3be8c;">Python学习手册.pdf</span><span>&#39;,)) </span><span style="color:#65737e;">#实例化，target表示进程启动后要执行的代码，元组里面是传递的参数</span><span style="color:#65737e;">
</span><span>    p1.</span><span style="color:#bf616a;">start</span><span>() </span><span style="color:#65737e;">#start是Process类中的一个方法</span><span style="color:#65737e;">
</span><span>    p2=</span><span style="color:#bf616a;">Process</span><span>(</span><span style="color:#bf616a;">target</span><span>=download_task,</span><span style="color:#bf616a;">args</span><span>=(&#39;</span><span style="color:#a3be8c;">HTML学习教程.mp4</span><span>&#39;,))</span><span>
</span><span>    p2.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    p1.</span><span style="color:#bf616a;">join</span><span>() </span><span style="color:#65737e;">#等待进程执行结束，是Process类中定义好的</span><span style="color:#65737e;">
</span><span>    p2.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    end=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">总共耗费了</span><span style="color:#d08770;">%.2f</span><span style="color:#a3be8c;">秒</span><span>&#39;%(end-start))</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>要实现两个进程间的通信。我们启动两个进程，一个输出ping，另一个输出pong，两个进程输出的ping和pong加起来总共10个</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>multiprocessing </span><span style="color:#b48ead;">import </span><span>Process</span><span>
</span><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time,sleep</span><span>
</span><span>
</span><span>counter=</span><span style="color:#d08770;">0</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">sub_task</span><span>(</span><span style="color:#bf616a;">string</span><span>):</span><span>
</span><span>    </span><span style="color:#b48ead;">global </span><span>counter</span><span>
</span><span>    </span><span style="color:#b48ead;">while </span><span>counter&lt;</span><span style="color:#d08770;">10</span><span>:</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(string,</span><span style="color:#bf616a;">end</span><span>=&#39;&#39;)</span><span>
</span><span>        counter+=</span><span style="color:#d08770;">1</span><span>
</span><span>        </span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">0.1</span><span>)</span><span>
</span><span>    </span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    </span><span style="color:#bf616a;">Process</span><span>(</span><span style="color:#bf616a;">target</span><span>=sub_task,</span><span style="color:#bf616a;">args</span><span>=(&#39;</span><span style="color:#a3be8c;">ping</span><span>&#39;,)).</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    </span><span style="color:#bf616a;">Process</span><span>(</span><span style="color:#bf616a;">target</span><span>=sub_task,</span><span style="color:#bf616a;">args</span><span>=(&#39;</span><span style="color:#a3be8c;">pong</span><span>&#39;,)).</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>执行后的结果是ping和pong各自都输出了10个。原因是两个子进程复制了父进程及其所有的数据结果，每个子进程都有自己的独立的内存空间，也就是说每个子进程下都有一个counter变量。解决方案就是使用multiprocessing模块中的queue类，可以被多个进程共享队列。</p>
<p>多线程</p>
<p>基于threading模块来实现多线程编程。</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>randint</span><span>
</span><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time,sleep</span><span>
</span><span style="color:#b48ead;">from </span><span>threading </span><span style="color:#b48ead;">import </span><span>Thread</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">download_task</span><span>(</span><span style="color:#bf616a;">filename</span><span>):</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">开始下载</span><span style="color:#d08770;">%s</span><span>&#39;%filename)</span><span>
</span><span>    time_to_download=</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">10</span><span>)</span><span>
</span><span>    </span><span style="color:#bf616a;">sleep</span><span>(time_to_download)</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">下载完成！耗费了</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">秒</span><span>&#39;%(filename,time_to_download))</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    start=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    t1=</span><span style="color:#bf616a;">Thread</span><span>(</span><span style="color:#bf616a;">target</span><span>=download_task,</span><span style="color:#bf616a;">args</span><span>=(&#39;</span><span style="color:#a3be8c;">Python学习手册.pdf</span><span>&#39;,))</span><span>
</span><span>    t1.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    t2=</span><span style="color:#bf616a;">Thread</span><span>(</span><span style="color:#bf616a;">target</span><span>=download_task,</span><span style="color:#bf616a;">args</span><span>=(&#39;</span><span style="color:#a3be8c;">HTML学习视频.MP4</span><span>&#39;,))</span><span>
</span><span>    t2.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    t1.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    t2.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    end=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">总共耗费了</span><span style="color:#d08770;">%.2f</span><span style="color:#a3be8c;">秒</span><span>&#39;%(end-start))</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>在这个例子中，我们是使用threading模块中的Thread类来创建多线程的。</p>
<p>通过自定义类来实现多线程下载</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>randint</span><span>
</span><span style="color:#b48ead;">from </span><span>threading </span><span style="color:#b48ead;">import </span><span>Thread</span><span>
</span><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time,sleep</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">DownloadTask</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Thread</span><span style="color:#eff1f5;">):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">filename</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>() </span><span style="color:#65737e;">#通过super可以调用父类的构造函数。就可以调用父类中的属性</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__filename=filename</span><span>
</span><span>    </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">开始下载</span><span style="color:#d08770;">%s</span><span>&#39;%</span><span style="color:#bf616a;">self</span><span>.__filename)</span><span>
</span><span>        time_to_download=</span><span style="color:#bf616a;">randint</span><span>(</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">10</span><span>)</span><span>
</span><span>        </span><span style="color:#bf616a;">sleep</span><span>(time_to_download)</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#d08770;">%s</span><span style="color:#a3be8c;">下载完成！耗时</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">秒</span><span>&#39;%(</span><span style="color:#bf616a;">self</span><span>.__filename,time_to_download))</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    start=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    t1=</span><span style="color:#bf616a;">DownloadTask</span><span>(&#39;</span><span style="color:#a3be8c;">Python学习手册.pdf</span><span>&#39;)</span><span>
</span><span>    t1.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    t2=</span><span style="color:#bf616a;">DownloadTask</span><span>(&#39;</span><span style="color:#a3be8c;">HTML学习视频.pdf</span><span>&#39;)</span><span>
</span><span>    t2.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    t1.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    t2.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    end=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">总共耗费了</span><span style="color:#d08770;">%.2f</span><span style="color:#a3be8c;">秒</span><span>&#39;%(end-start))</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>	</span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>因为多线程可以共享进程的内存空间，因此要实现多线程间的通信相对简单。</p>
<p>一般情况下，创建一个全局变量，所有的线程共享这个全局变量即可。但是当多个线程共享同一个变量（称之为资源），很可能产生不可控的结果，从而导致程序失效甚至崩溃。</p>
<p>如果一个资源被多个线程竞争使用，我们通常称为‘临界资源’,对临界资源的访问是需要保护的，否则资源会处于混乱状态。</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>sleep</span><span>
</span><span style="color:#b48ead;">from </span><span>threading </span><span style="color:#b48ead;">import </span><span>Thread</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Account</span><span style="color:#eff1f5;">():</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__balance=</span><span style="color:#d08770;">0 </span><span style="color:#65737e;">#创建一个构造函数中的私有变量，初始值为0</span><span style="color:#65737e;">
</span><span>    </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">yu_e</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">money</span><span>):</span><span>
</span><span>        </span><span style="color:#65737e;">#计算存款后的余额</span><span style="color:#65737e;">
</span><span>        new_balance=</span><span style="color:#bf616a;">self</span><span>.__balance+money</span><span>
</span><span>        </span><span style="color:#65737e;">#受理存款业务需要0.1秒时间</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">0.0001</span><span>)  </span><span style="color:#65737e;">#时间的长短和Python的处理速度相关</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#65737e;">#修改账户余额</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__balance=new_balance</span><span>
</span><span>
</span><span>    @</span><span style="color:#96b5b4;">property</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">balance</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.__balance</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">AddMoneyThread</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Thread</span><span style="color:#eff1f5;">):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">account</span><span>,</span><span style="color:#bf616a;">money</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>()</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__account=account</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__money=money</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__account.</span><span style="color:#bf616a;">yu_e</span><span>(</span><span style="color:#bf616a;">self</span><span>.__money)</span><span>
</span><span>    </span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    account=</span><span style="color:#bf616a;">Account</span><span>()</span><span>
</span><span>    threads=[]</span><span>
</span><span>    </span><span style="color:#65737e;">#创建100个存款的线程向同一个账户存钱</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">100</span><span>):</span><span>
</span><span>        t=</span><span style="color:#bf616a;">AddMoneyThread</span><span>(account,</span><span style="color:#d08770;">1</span><span>)</span><span>
</span><span>        threads.</span><span style="color:#bf616a;">append</span><span>(t)</span><span>
</span><span>        t.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>        </span><span>
</span><span>    </span><span>
</span><span>    </span><span style="color:#b48ead;">for </span><span>t </span><span style="color:#b48ead;">in </span><span>threads:</span><span>
</span><span>        t.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">账户的余额为：</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">元</span><span>&#39;%account.balance)</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>当sleep(0.0001)的时候，运行的结果远小于期望的结果100，这是因为我们没有对银行账户这个临界资源加以保护。因为多个线程账户余额都是从初始值0开始递加的，所以就会得到错误的结果。</p>
<p>要解决这个问题，就要使用锁。只有获得锁的线程才能访问临界资源。没有锁的线程只能被阻塞起来，直到获得锁的线程释放锁才有机会获得锁。</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>sleep</span><span>
</span><span style="color:#b48ead;">from </span><span>threading </span><span style="color:#b48ead;">import </span><span>Thread,Lock</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Account</span><span style="color:#eff1f5;">():</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__balance=</span><span style="color:#d08770;">0 </span><span style="color:#65737e;">#创建一个构造函数中的私有变量，初始值为0</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#65737e;">#设置锁</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__lock=</span><span style="color:#bf616a;">Lock</span><span>()</span><span>
</span><span>    </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">yu_e</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">money</span><span>):</span><span>
</span><span>        </span><span style="color:#65737e;">#先获取锁才能执行后面的代码</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__lock.</span><span style="color:#bf616a;">acquire</span><span>()</span><span>
</span><span>        </span><span style="color:#b48ead;">try</span><span>:</span><span>
</span><span>            </span><span style="color:#65737e;">#计算存款后的余额</span><span style="color:#65737e;">
</span><span>            new_balance=</span><span style="color:#bf616a;">self</span><span>.__balance+money</span><span>
</span><span>            </span><span style="color:#65737e;">#受理存款业务需要0.1秒时间</span><span style="color:#65737e;">
</span><span>            </span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">0.0001</span><span>)  </span><span style="color:#65737e;">#时间的长度和Python的处理速度相关</span><span style="color:#65737e;">
</span><span>            </span><span style="color:#65737e;">#修改账户余额</span><span style="color:#65737e;">
</span><span>            </span><span style="color:#bf616a;">self</span><span>.__balance=new_balance</span><span>
</span><span>        </span><span style="color:#b48ead;">finally</span><span>:</span><span>
</span><span>            </span><span style="color:#65737e;">#不管有没有异常，都释放锁</span><span style="color:#65737e;">
</span><span>            </span><span style="color:#bf616a;">self</span><span>.__lock.</span><span style="color:#bf616a;">release</span><span>()</span><span>
</span><span>
</span><span>    @</span><span style="color:#96b5b4;">property</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">balance</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.__balance</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">AddMoneyThread</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Thread</span><span style="color:#eff1f5;">):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">account</span><span>,</span><span style="color:#bf616a;">money</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>()</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__account=account</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__money=money</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.__account.</span><span style="color:#bf616a;">yu_e</span><span>(</span><span style="color:#bf616a;">self</span><span>.__money)</span><span>
</span><span>    </span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    account=</span><span style="color:#bf616a;">Account</span><span>()</span><span>
</span><span>    threads=[]</span><span>
</span><span>    </span><span style="color:#65737e;">#创建100个存款的线程向同一个账户存钱</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">100</span><span>):</span><span>
</span><span>        t=</span><span style="color:#bf616a;">AddMoneyThread</span><span>(account,</span><span style="color:#d08770;">1</span><span>)</span><span>
</span><span>        threads.</span><span style="color:#bf616a;">append</span><span>(t)</span><span>
</span><span>        t.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>        </span><span>
</span><span>    </span><span>
</span><span>    </span><span style="color:#b48ead;">for </span><span>t </span><span style="color:#b48ead;">in </span><span>threads:</span><span>
</span><span>        t.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">账户的余额为：</span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">元</span><span>&#39;%account.balance)</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>
<p>多进程还是多线程？</p>
<p>单核CPU处理单任务就是等一个任务执行完成之后才执行另一个任务，花费时间比较长。</p>
<p>单核CPU在执行多任务处理的时候，是需要有代价的（比如切换任务的时候需要准备环境），如果任务太多，CPU就会花费大量的时间在任务切换上，从而只有很少的时间来执行任务，这样就会使得系统性能急剧下降，导致所有任务都处理不好。</p>
<p>第二个考虑是否多任务的因素是任务的类型（计算密集型、I/O密集型）</p>
<p>计算密集型特点是需要进行大量的计算，消耗CPU的资源。不建议使用多任务，CPU会忙着切换任务，导致执行效率变低。</p>
<p>I/O密集型主要涉及到网络、存储介质输入输出的任务。CPU消耗小，任务的大部分时间都是在等待I/O操作完成。建议使用多任务，可以减少I/O的等待时间。网络应用和web应用都可以看做I/O密集型</p>
<p>单线程+异步I/O</p>
<p>现在的操作系统都支持使用异步I/O来执行单进程单线程的多任务处理，这种模型我们成为事件驱动模型。Nginx就是支持异步I/O的web服务器。</p>
<p>例子：将耗时间的任务放到线程中以获得更好的用户体验</p>
<p>单线程实现</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>time</span><span>
</span><span style="color:#b48ead;">import </span><span>tkinter </span><span style="color:#65737e;">#使用Python进行窗口视图设计的模块</span><span style="color:#65737e;">
</span><span style="color:#b48ead;">import </span><span>tkinter.messagebox</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">download</span><span>():</span><span>
</span><span>    </span><span style="color:#65737e;">#模拟下载任务需要花费10秒</span><span style="color:#65737e;">
</span><span>    time.</span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">10</span><span>)</span><span>
</span><span>    tkinter.messagebox.</span><span style="color:#bf616a;">showinfo</span><span>(</span><span style="color:#bf616a;">title</span><span>=&#39;</span><span style="color:#a3be8c;">提示</span><span>&#39;,</span><span style="color:#bf616a;">message</span><span>=&#39;</span><span style="color:#a3be8c;">下载完成！</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_about</span><span>():</span><span>
</span><span>    tkinter.messagebox.</span><span style="color:#bf616a;">showinfo</span><span>(</span><span style="color:#bf616a;">title</span><span>=&#39;</span><span style="color:#a3be8c;">关于</span><span>&#39;,</span><span style="color:#bf616a;">message</span><span>=&#39;</span><span style="color:#a3be8c;">pinginglab</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>(): </span><span style="color:#65737e;">#先设计视窗，然后再定义下载和关于两个按钮</span><span style="color:#65737e;">
</span><span>    top=tkinter.</span><span style="color:#bf616a;">Tk</span><span>() </span><span style="color:#65737e;">#调用tkinter的Tk接口</span><span style="color:#65737e;">
</span><span>    top.</span><span style="color:#bf616a;">title</span><span>(&#39;</span><span style="color:#a3be8c;">单线程</span><span>&#39;)</span><span>
</span><span>    top.</span><span style="color:#bf616a;">geometry</span><span>(&#39;</span><span style="color:#a3be8c;">200x150</span><span>&#39;) </span><span style="color:#65737e;">#视窗外部尺寸</span><span style="color:#65737e;">
</span><span>    top.</span><span style="color:#bf616a;">wm_attributes</span><span>(&#39;</span><span style="color:#a3be8c;">-topmost</span><span>&#39;,</span><span style="color:#d08770;">True</span><span>)</span><span>
</span><span>
</span><span>    a=tkinter.</span><span style="color:#bf616a;">Frame</span><span>(top)</span><span>
</span><span>    button1=tkinter.</span><span style="color:#bf616a;">Button</span><span>(a,</span><span style="color:#bf616a;">text</span><span>=&#39;</span><span style="color:#a3be8c;">下载</span><span>&#39;,</span><span style="color:#bf616a;">command</span><span>=download)</span><span>
</span><span>    button1.</span><span style="color:#bf616a;">pack</span><span>(</span><span style="color:#bf616a;">side</span><span>=&#39;</span><span style="color:#a3be8c;">left</span><span>&#39;)</span><span>
</span><span>    button2=tkinter.</span><span style="color:#bf616a;">Button</span><span>(a,</span><span style="color:#bf616a;">text</span><span>=&#39;</span><span style="color:#a3be8c;">关于</span><span>&#39;,</span><span style="color:#bf616a;">command</span><span>=show_about)</span><span>
</span><span>    button2.</span><span style="color:#bf616a;">pack</span><span>(</span><span style="color:#bf616a;">side</span><span>=&#39;</span><span style="color:#a3be8c;">right</span><span>&#39;)</span><span>
</span><span>
</span><span>    a.</span><span style="color:#bf616a;">pack</span><span>(</span><span style="color:#bf616a;">side</span><span>=&#39;</span><span style="color:#a3be8c;">bottom</span><span>&#39;)</span><span>
</span><span>
</span><span>    tkinter.</span><span style="color:#bf616a;">mainloop</span><span>()</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>多线程实现</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>time</span><span>
</span><span style="color:#b48ead;">import </span><span>tkinter </span><span style="color:#65737e;">#使用Python进行窗口视图设计的模块</span><span style="color:#65737e;">
</span><span style="color:#b48ead;">import </span><span>tkinter.messagebox</span><span>
</span><span style="color:#b48ead;">from </span><span>threading </span><span style="color:#b48ead;">import </span><span>Thread</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">DownloadTask</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Thread</span><span style="color:#eff1f5;">):</span><span>
</span><span>        </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>            time.</span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">10</span><span>)</span><span>
</span><span>            tkinter.messagebox.</span><span style="color:#bf616a;">showinfo</span><span>(&#39;</span><span style="color:#a3be8c;">提示</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">下载完成</span><span>&#39;)</span><span>
</span><span>            </span><span style="color:#65737e;">#启用下载按钮</span><span style="color:#65737e;">
</span><span>            button1.</span><span style="color:#bf616a;">config</span><span>(</span><span style="color:#bf616a;">state</span><span>=tkinter.</span><span style="color:#bf616a;">NORMAL</span><span>)</span><span>
</span><span>        </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">download</span><span>():</span><span>
</span><span>        </span><span style="color:#65737e;">#禁用下载按钮</span><span style="color:#65737e;">
</span><span>        button1.</span><span style="color:#bf616a;">config</span><span>(</span><span style="color:#bf616a;">state</span><span>=tkinter.</span><span style="color:#bf616a;">DISABLED</span><span>)</span><span>
</span><span>        </span><span style="color:#65737e;">#设通过daemon置守护线程(主程序退出就不再执行),在线程中，处理耗时的下载任务</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">DownloadTask</span><span>(</span><span style="color:#bf616a;">daemon</span><span>=</span><span style="color:#d08770;">True</span><span>).</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_about</span><span>():</span><span>
</span><span>        tkinter.messagebox.</span><span style="color:#bf616a;">showinfo</span><span>(&#39;</span><span style="color:#a3be8c;">关于</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">pinginglab</span><span>&#39;)</span><span>
</span><span>
</span><span>    top=tkinter.</span><span style="color:#bf616a;">Tk</span><span>() </span><span style="color:#65737e;">#调用tkinter的Tk接口</span><span style="color:#65737e;">
</span><span>    top.</span><span style="color:#bf616a;">title</span><span>(&#39;</span><span style="color:#a3be8c;">单线程</span><span>&#39;)</span><span>
</span><span>    top.</span><span style="color:#bf616a;">geometry</span><span>(&#39;</span><span style="color:#a3be8c;">200x150</span><span>&#39;) </span><span style="color:#65737e;">#视窗外部尺寸</span><span style="color:#65737e;">
</span><span>    top.</span><span style="color:#bf616a;">wm_attributes</span><span>(&#39;</span><span style="color:#a3be8c;">-topmost</span><span>&#39;,</span><span style="color:#d08770;">True</span><span>)</span><span>
</span><span>    a=tkinter.</span><span style="color:#bf616a;">Frame</span><span>(top)</span><span>
</span><span>    a.</span><span style="color:#bf616a;">pack</span><span>(</span><span style="color:#bf616a;">side</span><span>=&#39;</span><span style="color:#a3be8c;">bottom</span><span>&#39;)</span><span>
</span><span>
</span><span>    button1=tkinter.</span><span style="color:#bf616a;">Button</span><span>(a,</span><span style="color:#bf616a;">text</span><span>=&#39;</span><span style="color:#a3be8c;">下载</span><span>&#39;,</span><span style="color:#bf616a;">command</span><span>=download)</span><span>
</span><span>    button1.</span><span style="color:#bf616a;">pack</span><span>(</span><span style="color:#bf616a;">side</span><span>=&#39;</span><span style="color:#a3be8c;">left</span><span>&#39;)</span><span>
</span><span>    button2=tkinter.</span><span style="color:#bf616a;">Button</span><span>(a,</span><span style="color:#bf616a;">text</span><span>=&#39;</span><span style="color:#a3be8c;">关于</span><span>&#39;,</span><span style="color:#bf616a;">command</span><span>=show_about)</span><span>
</span><span>    button2.</span><span style="color:#bf616a;">pack</span><span>(</span><span style="color:#bf616a;">side</span><span>=&#39;</span><span style="color:#a3be8c;">right</span><span>&#39;)</span><span>
</span><span>
</span><span>    tkinter.</span><span style="color:#bf616a;">mainloop</span><span>()</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>使用多进程处理复杂的任务</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    total=</span><span style="color:#d08770;">0</span><span>
</span><span>    number_list=[x </span><span style="color:#b48ead;">for </span><span>x </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">100000001</span><span>)]</span><span>
</span><span>    start=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#b48ead;">for </span><span>number </span><span style="color:#b48ead;">in </span><span>number_list:</span><span>
</span><span>        total+=number</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(total)</span><span>
</span><span>    end=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">总共花费了</span><span style="color:#d08770;">%.2f</span><span style="color:#a3be8c;">秒</span><span>&#39;%(end-start))</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>
<p>接下来把生成列表的任务放到8个进程中处理，不考虑列表切片的时间</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time</span><span>
</span><span style="color:#b48ead;">from </span><span>random </span><span style="color:#b48ead;">import </span><span>randint</span><span>
</span><span style="color:#b48ead;">from </span><span>multiprocessing </span><span style="color:#b48ead;">import </span><span>Process,Queue</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">task</span><span>(</span><span style="color:#bf616a;">curr_lsit</span><span>,</span><span style="color:#bf616a;">result_queue</span><span>):</span><span>
</span><span>    total=</span><span style="color:#d08770;">0</span><span>
</span><span>    </span><span style="color:#b48ead;">for </span><span>number </span><span style="color:#b48ead;">in </span><span>curr_lsit:</span><span>
</span><span>        total+=number</span><span>
</span><span>    result_queue.</span><span style="color:#bf616a;">put</span><span>(total)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    processes=[]</span><span>
</span><span>    number_list=[x </span><span style="color:#b48ead;">for </span><span>x </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">100000001</span><span>)]</span><span>
</span><span>    result_queue=</span><span style="color:#bf616a;">Queue</span><span>()</span><span>
</span><span>    index=</span><span style="color:#d08770;">0</span><span>
</span><span>
</span><span>    </span><span style="color:#65737e;">#启动8个进程将数据切片后进行计算</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">8</span><span>):</span><span>
</span><span>        p=</span><span style="color:#bf616a;">Process</span><span>(</span><span style="color:#bf616a;">target</span><span>=task,</span><span style="color:#bf616a;">args</span><span>=(number_list[index:index+</span><span style="color:#d08770;">12500000</span><span>],result_queue))</span><span>
</span><span>        index+=</span><span style="color:#d08770;">12500000</span><span>
</span><span>        processes.</span><span style="color:#bf616a;">append</span><span>(p)</span><span>
</span><span>        p.</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    </span><span>
</span><span>    </span><span style="color:#65737e;">#统计所有进程执行完成花费的时间</span><span style="color:#65737e;">
</span><span>    start=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#b48ead;">for </span><span>p </span><span style="color:#b48ead;">in </span><span>processes:</span><span>
</span><span>        p.</span><span style="color:#bf616a;">join</span><span>()</span><span>
</span><span>    </span><span>
</span><span>    total=</span><span style="color:#d08770;">0</span><span>
</span><span>    </span><span style="color:#b48ead;">while </span><span>not result_queue.</span><span style="color:#bf616a;">empty</span><span>():</span><span>
</span><span>        total+=result_queue.</span><span style="color:#bf616a;">get</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(total)</span><span>
</span><span>    end=</span><span style="color:#bf616a;">time</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">总共花费了</span><span style="color:#d08770;">%.2f</span><span style="color:#a3be8c;">秒</span><span>&#39;%(end-start))</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>
<p>使用多进程可以充分利用CPU多核的特性，减少程序的执行时间，计算量越大效果越明显。</p>
<p>如果计算量超大，可以考虑分布式进程（将多个进程部署在多个计算机上面）</p>
<p>Python网络编程入门和网络应用开发</p>
<p>requests库</p>
<p>是一个基于HTTP协议来使用网络的第三方库。</p>
<p>通过pip3 list来查看有没有安装该库，如果没有通过命令</p>
<p>pip3 intall requests 来进行安装</p>
<p>例子：通过调用API来进行图片下载</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>requests</span><span>
</span><span>
</span><span style="color:#b48ead;">from </span><span>time </span><span style="color:#b48ead;">import </span><span>time</span><span>
</span><span style="color:#b48ead;">from </span><span>threading </span><span style="color:#b48ead;">import </span><span>Thread</span><span>
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">DownloadTask</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Thread</span><span style="color:#eff1f5;">):</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">url</span><span>):</span><span>
</span><span>        </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>()</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.url=url</span><span>
</span><span>    </span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>        filename=</span><span style="color:#bf616a;">self</span><span>.url[</span><span style="color:#bf616a;">self</span><span>.url.</span><span style="color:#bf616a;">rfind</span><span>(&#39;</span><span style="color:#a3be8c;">/</span><span>&#39;)+</span><span style="color:#d08770;">1</span><span>:]  </span><span style="color:#65737e;">#用来获取图片的文件名</span><span style="color:#65737e;">
</span><span>        resp=requests.</span><span style="color:#bf616a;">get</span><span>(</span><span style="color:#bf616a;">self</span><span>.url)</span><span>
</span><span>        </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">/Users/Hao/</span><span>&#39;+filename,&#39;</span><span style="color:#a3be8c;">wb</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>            f.</span><span style="color:#bf616a;">write</span><span>(resp.content)</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    resp=requests.</span><span style="color:#bf616a;">get</span><span>(&#39;</span><span style="color:#a3be8c;">http://api.tianapi.com/guonei/index?key=xxx&amp;num=10</span><span>&#39;)</span><span>
</span><span>    data_model=resp.</span><span style="color:#bf616a;">json</span><span>()</span><span>
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span>data_model[&#39;</span><span style="color:#a3be8c;">newslist</span><span>&#39;]:</span><span>
</span><span>        url=i[&#39;</span><span style="color:#a3be8c;">picUrl</span><span>&#39;]  </span><span style="color:#65737e;">#拿到图片的URL</span><span style="color:#65737e;">
</span><span>        </span><span style="color:#bf616a;">DownloadTask</span><span>(url).</span><span style="color:#bf616a;">start</span><span>() </span><span style="color:#65737e;">#交给多线程类进行下载</span><span style="color:#65737e;">
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>网络应用模式</p>
<p>C/S B/S </p>
<p>去中心化的网络应用模式</p>
<p>基于传输层协议的套接字编程</p>
<p>套接字就是一套通过c语言编写的应用程序开发库，用于实现进程间通信和网络编程，在网络应用开发中被广泛使用。</p>
<p>TCP套接字</p>
<p>就是使用tcp协议提供的传输服务来实现网络通信的接口</p>
<p>在Python中通创建socket对象并指定type为SOCK_STREAM来使用tcp套接字。</p>
<p>由于一台主机可能拥有多个ip地址，而且很可能配置了多个服务，所以在设置服务端程序的时候，需要在创建套接字对象后将其绑定到指定的IP地址和端口上。</p>
<p>例子：提供时间日期服务</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>socket </span><span style="color:#b48ead;">import </span><span>socket,</span><span style="color:#bf616a;">SOCK_STREAM</span><span>,</span><span style="color:#bf616a;">AF_INET</span><span>
</span><span style="color:#b48ead;">from </span><span>datetime </span><span style="color:#b48ead;">import </span><span>datetime</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    </span><span style="color:#65737e;">#创建套接字对象并指定使用哪种传输服务</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#65737e;">#AF_INET IPv4地址</span><span style="color:#65737e;">
</span><span>    server=</span><span style="color:#bf616a;">socket</span><span>(</span><span style="color:#bf616a;">type</span><span>=</span><span style="color:#bf616a;">SOCK_STREAM</span><span>,</span><span style="color:#bf616a;">family</span><span>=</span><span style="color:#bf616a;">AF_INET</span><span>)</span><span>
</span><span>    </span><span style="color:#65737e;">#同一时间在同一个端口只能绑定一个服务，否则报错</span><span style="color:#65737e;">
</span><span>    server.</span><span style="color:#bf616a;">bind</span><span>((&#39;</span><span style="color:#a3be8c;">192.168.0.194</span><span>&#39;,</span><span style="color:#d08770;">6789</span><span>))</span><span>
</span><span>    server.</span><span style="color:#bf616a;">listen</span><span>(</span><span style="color:#d08770;">512</span><span>)</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">服务器开始监听</span><span>&#39;)</span><span>
</span><span>
</span><span>    </span><span style="color:#65737e;">#通过循环接收客户端的连接并为其提供服务</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">while </span><span style="color:#d08770;">True</span><span>:</span><span>
</span><span>        </span><span style="color:#65737e;">#accept方法是一个阻塞方法，如果没有客户端连接到服务器，代码不会向下执行</span><span style="color:#65737e;">
</span><span>        client,addr=server.</span><span style="color:#bf616a;">accept</span><span>()</span><span>
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#bf616a;">str</span><span>(addr)+&#39;</span><span style="color:#a3be8c;">连接到了服务器.</span><span>&#39;)</span><span>
</span><span>        </span><span style="color:#65737e;">#发送数据</span><span style="color:#65737e;">
</span><span>        client.</span><span style="color:#bf616a;">send</span><span>(</span><span style="color:#bf616a;">str</span><span>(datetime.</span><span style="color:#bf616a;">now</span><span>()).</span><span style="color:#bf616a;">encode</span><span>(&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;))</span><span>
</span><span>        </span><span style="color:#65737e;">#断开连接</span><span style="color:#65737e;">
</span><span>        client.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>客户端</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>socket </span><span style="color:#b48ead;">import </span><span>socket</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    client=</span><span style="color:#bf616a;">socket</span><span>()</span><span>
</span><span>    client.</span><span style="color:#bf616a;">connect</span><span>((&#39;</span><span style="color:#a3be8c;">192.168.0.194</span><span>&#39;,</span><span style="color:#d08770;">6789</span><span>))</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(client.</span><span style="color:#bf616a;">recv</span><span>(</span><span style="color:#d08770;">1024</span><span>).</span><span style="color:#bf616a;">decode</span><span>(&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;))</span><span>
</span><span>    client.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>采用多线程编程优化服务端程序</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>socket </span><span style="color:#b48ead;">import </span><span>socket,</span><span style="color:#bf616a;">SOCK_STREAM</span><span>,</span><span style="color:#bf616a;">AF_INET</span><span>
</span><span style="color:#b48ead;">from </span><span>datetime </span><span style="color:#b48ead;">import </span><span>datetime</span><span>
</span><span style="color:#b48ead;">from </span><span>threading </span><span style="color:#b48ead;">import </span><span>Thread</span><span>
</span><span style="color:#b48ead;">from </span><span>base64 </span><span style="color:#b48ead;">import </span><span>b64encode</span><span>
</span><span style="color:#b48ead;">from </span><span>json </span><span style="color:#b48ead;">import </span><span>dumps</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">FlieTran</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Thread</span><span style="color:#eff1f5;">):</span><span>
</span><span>
</span><span>        </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>,</span><span style="color:#bf616a;">cclient</span><span>):</span><span>
</span><span>            </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>()</span><span>
</span><span>            </span><span style="color:#bf616a;">self</span><span>.cclient=cclient</span><span>
</span><span>
</span><span>        </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run</span><span>(</span><span style="color:#bf616a;">self</span><span>):</span><span>
</span><span>            dict={}</span><span>
</span><span>            dict[&#39;</span><span style="color:#a3be8c;">filename</span><span>&#39;]=&#39;</span><span style="color:#a3be8c;">timg.jpeg</span><span>&#39;</span><span>
</span><span>            </span><span style="color:#65737e;">#返回的图片通过json格式，json是纯文本，图片是二进制，所以需要做编码处理</span><span style="color:#65737e;">
</span><span>            dict[&#39;</span><span style="color:#a3be8c;">filedata</span><span>&#39;]=data</span><span>
</span><span>            </span><span style="color:#65737e;">#通过dumps将字典处理成字符串</span><span style="color:#65737e;">
</span><span>            json_str=</span><span style="color:#bf616a;">dumps</span><span>(dict)</span><span>
</span><span>            </span><span style="color:#65737e;">#发送json字符串</span><span style="color:#65737e;">
</span><span>            </span><span style="color:#bf616a;">self</span><span>.cclient.</span><span style="color:#bf616a;">send</span><span>(json_str.</span><span style="color:#bf616a;">encode</span><span>(&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;))</span><span>
</span><span>            </span><span style="color:#bf616a;">self</span><span>.cclient.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>
</span><span>    server=</span><span style="color:#bf616a;">socket</span><span>()</span><span>
</span><span>    server.</span><span style="color:#bf616a;">bind</span><span>((&#39;</span><span style="color:#a3be8c;">192.168.0.109</span><span>&#39;,</span><span style="color:#d08770;">49876</span><span>))</span><span>
</span><span>    server.</span><span style="color:#bf616a;">listen</span><span>(</span><span style="color:#d08770;">512</span><span>)</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">服务器启动监听</span><span>&#39;)</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">timg.jpeg</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">rb</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>        </span><span style="color:#65737e;">#上面将图片通过json传输的时候做了utf8的编码，所以这里base64编码的对象就是经过utf8编码的json字符串</span><span style="color:#65737e;">
</span><span>        data=</span><span style="color:#bf616a;">b64encode</span><span>(f.</span><span style="color:#bf616a;">read</span><span>()).</span><span style="color:#bf616a;">decode</span><span>(&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#b48ead;">while </span><span style="color:#d08770;">True</span><span>:</span><span>
</span><span>        client,addr=server.</span><span style="color:#bf616a;">accept</span><span>()</span><span>
</span><span>        </span><span style="color:#bf616a;">FlieTran</span><span>(client).</span><span style="color:#bf616a;">start</span><span>()</span><span>
</span><span>    </span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>客户端代码</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>socket </span><span style="color:#b48ead;">import </span><span>socket</span><span>
</span><span style="color:#b48ead;">from </span><span>json </span><span style="color:#b48ead;">import </span><span>loads</span><span>
</span><span style="color:#b48ead;">from </span><span>base64 </span><span style="color:#b48ead;">import </span><span>b64decode</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    client=</span><span style="color:#bf616a;">socket</span><span>()</span><span>
</span><span>    client.</span><span style="color:#bf616a;">connect</span><span>((&#39;</span><span style="color:#a3be8c;">192.168.0.109</span><span>&#39;,</span><span style="color:#d08770;">49876</span><span>))</span><span>
</span><span>    </span><span style="color:#65737e;">#定义一个保存二进制数据的对象</span><span style="color:#65737e;">
</span><span>    in_data=</span><span style="color:#bf616a;">bytes</span><span>()</span><span>
</span><span>
</span><span>    data=client.</span><span style="color:#bf616a;">recv</span><span>(</span><span style="color:#d08770;">1024</span><span>)</span><span>
</span><span>    </span><span style="color:#b48ead;">while </span><span>data:</span><span>
</span><span>        in_data+=data</span><span>
</span><span>        data=client.</span><span style="color:#bf616a;">recv</span><span>(</span><span style="color:#d08770;">1024</span><span>)</span><span>
</span><span>
</span><span>    my_dict=</span><span style="color:#bf616a;">loads</span><span>(in_data.</span><span style="color:#bf616a;">decode</span><span>(&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;))</span><span>
</span><span>    filename=my_dict[&#39;</span><span style="color:#a3be8c;">filename</span><span>&#39;]</span><span>
</span><span>    filedata=my_dict[&#39;</span><span style="color:#a3be8c;">filedata</span><span>&#39;].</span><span style="color:#bf616a;">encode</span><span>(&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>
</span><span>    </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">/Users/Hao/</span><span>&#39;+filename,&#39;</span><span style="color:#a3be8c;">wb</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>        </span><span style="color:#65737e;">#将base64的数据解码成二进制些人文件</span><span style="color:#65737e;">
</span><span>        f.</span><span style="color:#bf616a;">write</span><span>(</span><span style="color:#bf616a;">b64decode</span><span>(filedata))</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">图片已经保存</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>UDP套接字</p>
<p>通过UDP套接字实现电子邮件发送</p>
<p>发送电子邮件的时候要用smtp，smtp基于tcp，端口号25</p>
<p>接收邮件 POP3 </p>
<p>smtp规定了邮件发送者和发送邮件的服务器进行通信的细节</p>
<p>Python通过 smtplib来实现smtp操作</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>smtplib </span><span style="color:#b48ead;">import </span><span style="color:#bf616a;">SMTP</span><span>
</span><span style="color:#b48ead;">from </span><span>email.header </span><span style="color:#b48ead;">import </span><span>Header</span><span>
</span><span style="color:#b48ead;">from </span><span>email.mime.text </span><span style="color:#b48ead;">import </span><span>MIMEText</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    sender=&#39;</span><span style="color:#a3be8c;">xxx@qq.com</span><span>&#39;</span><span>
</span><span>    receivers=[&#39;</span><span style="color:#a3be8c;">xxx@gmail.com</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">xxx@qq.com</span><span>&#39;]</span><span>
</span><span>    message=</span><span style="color:#bf616a;">MIMEText</span><span>(&#39;</span><span style="color:#a3be8c;">用Python发送邮件示例代码</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">plain</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>    message[&#39;</span><span style="color:#a3be8c;">From</span><span>&#39;]=</span><span style="color:#bf616a;">Header</span><span>(&#39;</span><span style="color:#a3be8c;">小明</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>    message[&#39;</span><span style="color:#a3be8c;">To</span><span>&#39;]=</span><span style="color:#bf616a;">Header</span><span>(&#39;</span><span style="color:#a3be8c;">小红</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>    message[&#39;</span><span style="color:#a3be8c;">Subject</span><span>&#39;]=</span><span style="color:#bf616a;">Header</span><span>(&#39;</span><span style="color:#a3be8c;">示例代码邮件</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>    smtper=</span><span style="color:#bf616a;">SMTP</span><span>(&#39;</span><span style="color:#a3be8c;">smtp.qq.com</span><span>&#39;)</span><span>
</span><span>    smtper.</span><span style="color:#bf616a;">login</span><span>(sender,&#39;</span><span style="color:#a3be8c;">qq邮箱授权码</span><span>&#39;)</span><span>
</span><span>
</span><span>    smtper.</span><span style="color:#bf616a;">sendmail</span><span>(sender,receivers,message.</span><span style="color:#bf616a;">as_string</span><span>())</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">邮件发送完成</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>发送带有附件的邮件</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>smtplib </span><span style="color:#b48ead;">import </span><span style="color:#bf616a;">SMTP</span><span>
</span><span style="color:#b48ead;">from </span><span>email.header </span><span style="color:#b48ead;">import </span><span>Header</span><span>
</span><span style="color:#b48ead;">from </span><span>email.mime.text </span><span style="color:#b48ead;">import </span><span>MIMEText</span><span>
</span><span style="color:#b48ead;">from </span><span>email.mime.image </span><span style="color:#b48ead;">import </span><span>MIMEImage</span><span>
</span><span style="color:#b48ead;">from </span><span>email.mime.multipart </span><span style="color:#b48ead;">import </span><span>MIMEMultipart</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    </span><span style="color:#65737e;">#创建一个带附件的邮件消息对象</span><span style="color:#65737e;">
</span><span>    message=</span><span style="color:#bf616a;">MIMEMultipart</span><span>()</span><span>
</span><span>
</span><span>    text_content=</span><span style="color:#bf616a;">MIMEText</span><span>(&#39;</span><span style="color:#a3be8c;">带附件的测试邮件</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">plain</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>    message[&#39;</span><span style="color:#a3be8c;">Subject</span><span>&#39;]=</span><span style="color:#bf616a;">Header</span><span>(&#39;</span><span style="color:#a3be8c;">测试邮件邮件</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>    </span><span style="color:#65737e;">#将文本内容添加到消息对象中</span><span style="color:#65737e;">
</span><span>    message.</span><span style="color:#bf616a;">attach</span><span>(text_content)</span><span>
</span><span>
</span><span>    </span><span style="color:#65737e;">#将文件作为附件添加到消息对象中</span><span style="color:#65737e;">
</span><span>    </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(&#39;</span><span style="color:#a3be8c;">/Users/numb/test.txt</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">rb</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:</span><span>
</span><span>        txt=</span><span style="color:#bf616a;">MIMEText</span><span>(f.</span><span style="color:#bf616a;">read</span><span>(),&#39;</span><span style="color:#a3be8c;">plain</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">utf-8</span><span>&#39;)</span><span>
</span><span>        txt[&#39;</span><span style="color:#a3be8c;">Content-Type</span><span>&#39;]=&#39;</span><span style="color:#a3be8c;">text/plain</span><span>&#39;</span><span>
</span><span>        txt[&#39;</span><span style="color:#a3be8c;">Content-Dispositon</span><span>&#39;]=&#39;</span><span style="color:#a3be8c;">attachment;filename=test.txt</span><span>&#39;</span><span>
</span><span>        message.</span><span style="color:#bf616a;">attach</span><span>(txt)</span><span>
</span><span>    </span><span>
</span><span>    sender=&#39;</span><span style="color:#a3be8c;">xxx@qq.com</span><span>&#39;</span><span>
</span><span>    receivers=[&#39;</span><span style="color:#a3be8c;">xxx@qq.com</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">xxx@qq.com</span><span>&#39;]</span><span>
</span><span>    smtper=</span><span style="color:#bf616a;">SMTP</span><span>(&#39;</span><span style="color:#a3be8c;">smtp.qq.com</span><span>&#39;)</span><span>
</span><span>    smtper.</span><span style="color:#bf616a;">login</span><span>(sender,&#39;</span><span style="color:#a3be8c;">邮箱授权码</span><span>&#39;)</span><span>
</span><span>    smtper.</span><span style="color:#bf616a;">sendmail</span><span>(sender,receivers,message.</span><span style="color:#bf616a;">as_string</span><span>())</span><span>
</span><span>    smtper.</span><span style="color:#bf616a;">quit</span><span>()</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&#39;</span><span style="color:#a3be8c;">邮件发送完成</span><span>&#39;)</span><span>
</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span><span>
</span></code></pre>
<p>发送短信</p>
<p>先注册短信平台，互亿无线</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>urllib.parse</span><span>
</span><span style="color:#b48ead;">import </span><span>http.client</span><span>
</span><span style="color:#b48ead;">import </span><span>json</span><span>
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():</span><span>
</span><span>    host=&#39;</span><span style="color:#a3be8c;">106.ihuyi.com</span><span>&#39;</span><span>
</span><span>    sms_send_uri = &quot;</span><span style="color:#a3be8c;">/webservice/sms.php?method=Submit</span><span>&quot;</span><span>
</span><span>
</span><span>    params = urllib.parse.</span><span style="color:#bf616a;">urlencode</span><span>({&#39;</span><span style="color:#a3be8c;">account</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">xxx</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">password</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">xxx</span><span>&#39;,</span><span>
</span><span>    &#39;</span><span style="color:#a3be8c;">content</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">丽哥你好，我是黄卓然。您的验证码是：123456。请不要把验证码泄露给其他人。</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">mobile</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">手机号码</span><span>&#39;,&#39;</span><span style="color:#a3be8c;">format</span><span>&#39;:&#39;</span><span style="color:#a3be8c;">json</span><span>&#39;})</span><span>
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(params)</span><span>
</span><span>
</span><span>    headers={&#39;</span><span style="color:#a3be8c;">Content-Type</span><span>&#39;:&quot;</span><span style="color:#a3be8c;">application/x-www-form-urlencoded</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Accept</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">text/plain</span><span>&quot;}</span><span>
</span><span>    conn = http.client.</span><span style="color:#bf616a;">HTTPConnection</span><span>(host, </span><span style="color:#bf616a;">port</span><span>=</span><span style="color:#d08770;">80</span><span>, </span><span style="color:#bf616a;">timeout</span><span>=</span><span style="color:#d08770;">30</span><span>)</span><span>
</span><span>    conn.</span><span style="color:#bf616a;">request</span><span>(&quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;, sms_send_uri, params, headers)</span><span>
</span><span>    response = conn.</span><span style="color:#bf616a;">getresponse</span><span>()</span><span>
</span><span>    response_str = response.</span><span style="color:#bf616a;">read</span><span>()</span><span>
</span><span>    conn.</span><span style="color:#bf616a;">close</span><span>()</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span>response_str</span><span>
</span><span style="color:#b48ead;">if </span><span>__name__==&#39;</span><span style="color:#a3be8c;">__main__</span><span>&#39;:</span><span>
</span><span>    </span><span style="color:#bf616a;">main</span><span>()</span><span>
</span></code></pre>

    </div>

    
        <footer>
            <hr>
            <p>
                
                    Published by Baz
                
                
                    
                    in <a href="https://baz.ee/categories/an-quan/">安全</a>
                
                
            </p>
            
            
        </footer>
    
</article>


    </body>

</html>
